---
title: Vue çš„æµ‹è¯•å·¥å…·å’Œæœ€ä½³å®è·µ
tags:
  - Vue
status: robot
class: å‰ç«¯Vue
slug: vue-testing-tools-best-practices
ref:
---

## æ ¸å¿ƒè¦ç‚¹

**Vue æµ‹è¯•åˆ†ä¸ºå•å…ƒæµ‹è¯•ï¼ˆVitest + Vue Test Utilsï¼‰ã€ç»„ä»¶æµ‹è¯•ï¼ˆCypress Componentï¼‰å’Œ E2E æµ‹è¯•ï¼ˆPlaywright/Cypressï¼‰ä¸‰ä¸ªå±‚æ¬¡ã€‚æœ€ä½³å®è·µåŒ…æ‹¬ï¼šæµ‹è¯•ç”¨æˆ·è¡Œä¸ºè€Œéå®ç°ç»†èŠ‚ã€ä½¿ç”¨ data-testid å®šä½å…ƒç´ ã€æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ã€ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§å’Œå¯è¯»æ€§ã€‚**

---

## è¯¦ç»†å›ç­”

### ä¸€ã€Vue æµ‹è¯•ä½“ç³»æ¦‚è§ˆ

Vue åº”ç”¨çš„æµ‹è¯•å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š

```
æµ‹è¯•é‡‘å­—å¡”ï¼ˆä»åº•åˆ°é¡¶ï¼‰
        â•±  E2E æµ‹è¯•  â•²          å°‘é‡ã€æ…¢ã€å…¨é¢
       â•±--------------â•²
      â•± ç»„ä»¶é›†æˆæµ‹è¯•   â•²        é€‚é‡ã€ä¸­é€Ÿã€çœŸå®
     â•±------------------â•²
    â•±    å•å…ƒæµ‹è¯•        â•²      å¤§é‡ã€å¿«ã€éš”ç¦»
   â•±----------------------â•²
```

1. **å•å…ƒæµ‹è¯•ï¼ˆUnit Testsï¼‰**ï¼šæµ‹è¯•ç‹¬ç«‹çš„å‡½æ•°ã€ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰
2. **ç»„ä»¶æµ‹è¯•ï¼ˆComponent Testsï¼‰**ï¼šæµ‹è¯•å•ä¸ª Vue ç»„ä»¶çš„è¡Œä¸º
3. **E2E æµ‹è¯•ï¼ˆEnd-to-End Testsï¼‰**ï¼šæµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹

---

### äºŒã€æ ¸å¿ƒæµ‹è¯•å·¥å…·

#### 1. Vitestï¼ˆæ¨èçš„æµ‹è¯•è¿è¡Œå™¨ï¼‰

**ä¸ºä»€ä¹ˆé€‰æ‹© Vitestï¼Ÿ**
- ğŸš€ åŸºäº Viteï¼Œå¯åŠ¨é€Ÿåº¦æå¿«
- ğŸ”§ åŸç”Ÿæ”¯æŒ ESMã€TypeScript
- âš¡ çƒ­æ›´æ–°æ”¯æŒï¼ˆHMRï¼‰
- ğŸ¯ ä¸ Jest API å…¼å®¹
- ğŸ“Š å†…ç½®ä»£ç è¦†ç›–ç‡ï¼ˆc8/istanbulï¼‰

**å®‰è£…é…ç½®ï¼š**
```bash
npm install -D vitest @vue/test-utils jsdom
```

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  test: {
    globals: true,           // å…¨å±€ APIï¼ˆdescribeã€testã€expectï¼‰
    environment: 'jsdom',    // æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒ
    setupFiles: './tests/setup.js', // å…¨å±€è®¾ç½®
    coverage: {
      reporter: ['text', 'html'], // è¦†ç›–ç‡æŠ¥å‘Š
      exclude: ['node_modules/', 'tests/']
    }
  }
})
```

#### 2. Vue Test Utilsï¼ˆå®˜æ–¹æµ‹è¯•åº“ï¼‰

**æ ¸å¿ƒ APIï¼š**
- `mount()`ï¼šæŒ‚è½½ç»„ä»¶ï¼Œæ¸²æŸ“å­ç»„ä»¶
- `shallowMount()`ï¼šæµ…æŒ‚è½½ï¼Œä¸æ¸²æŸ“å­ç»„ä»¶ï¼ˆå·²åºŸå¼ƒï¼Œæ¨èç”¨æ’æ§½å­˜æ ¹ï¼‰
- `wrapper.find()`ï¼šæŸ¥æ‰¾å…ƒç´ 
- `wrapper.trigger()`ï¼šè§¦å‘äº‹ä»¶
- `wrapper.vm`ï¼šè®¿é—®ç»„ä»¶å®ä¾‹

**åŸºç¡€ç¤ºä¾‹ï¼š**
```javascript
import { mount } from '@vue/test-utils'
import Counter from '@/components/Counter.vue'
import { describe, it, expect } from 'vitest'

describe('Counter.vue', () => {
  it('increments count when button is clicked', async () => {
    const wrapper = mount(Counter)

    // æŸ¥æ‰¾æŒ‰é’®å¹¶è§¦å‘ç‚¹å‡»
    const button = wrapper.find('[data-testid="increment"]')
    await button.trigger('click')

    // æ–­è¨€æ–‡æœ¬æ›´æ–°
    expect(wrapper.text()).toContain('Count: 1')
  })
})
```

#### 3. Cypressï¼ˆç»„ä»¶ + E2E æµ‹è¯•ï¼‰

**ç»„ä»¶æµ‹è¯•ç¤ºä¾‹ï¼š**
```javascript
// cypress/component/Counter.cy.js
import Counter from '@/components/Counter.vue'

describe('Counter Component', () => {
  it('mounts and increments', () => {
    cy.mount(Counter)
    cy.get('[data-testid="count"]').should('contain', '0')
    cy.get('[data-testid="increment"]').click()
    cy.get('[data-testid="count"]').should('contain', '1')
  })
})
```

**E2E æµ‹è¯•ç¤ºä¾‹ï¼š**
```javascript
// cypress/e2e/login.cy.js
describe('Login Flow', () => {
  it('allows user to log in', () => {
    cy.visit('/login')
    cy.get('input[name="email"]').type('user@example.com')
    cy.get('input[name="password"]').type('password123')
    cy.get('button[type="submit"]').click()
    cy.url().should('include', '/dashboard')
    cy.contains('Welcome back!').should('be.visible')
  })
})
```

#### 4. Playwrightï¼ˆç°ä»£ E2E æ–¹æ¡ˆï¼‰

**ä¼˜åŠ¿ï¼š**
- æ”¯æŒå¤šæµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰
- æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦
- æ›´å¥½çš„è°ƒè¯•ä½“éªŒ

```javascript
// tests/e2e/login.spec.js
import { test, expect } from '@playwright/test'

test('user can log in', async ({ page }) => {
  await page.goto('http://localhost:3000/login')
  await page.fill('input[name="email"]', 'user@example.com')
  await page.fill('input[name="password"]', 'password123')
  await page.click('button[type="submit"]')
  await expect(page).toHaveURL(/.*dashboard/)
  await expect(page.locator('text=Welcome back!')).toBeVisible()
})
```

---

### ä¸‰ã€å•å…ƒæµ‹è¯•æœ€ä½³å®è·µ

#### 1. æµ‹è¯•ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰

```javascript
// composables/useCounter.js
import { ref } from 'vue'

export function useCounter(initialValue = 0) {
  const count = ref(initialValue)

  const increment = () => count.value++
  const decrement = () => count.value--
  const reset = () => count.value = initialValue

  return { count, increment, decrement, reset }
}
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/useCounter.spec.js
import { useCounter } from '@/composables/useCounter'
import { describe, it, expect } from 'vitest'

describe('useCounter', () => {
  it('initializes with default value', () => {
    const { count } = useCounter()
    expect(count.value).toBe(0)
  })

  it('initializes with custom value', () => {
    const { count } = useCounter(10)
    expect(count.value).toBe(10)
  })

  it('increments count', () => {
    const { count, increment } = useCounter()
    increment()
    expect(count.value).toBe(1)
  })

  it('resets to initial value', () => {
    const { count, increment, reset } = useCounter(5)
    increment()
    increment()
    expect(count.value).toBe(7)
    reset()
    expect(count.value).toBe(5)
  })
})
```

#### 2. æµ‹è¯•çº¯å‡½æ•°/å·¥å…·å‡½æ•°

```javascript
// utils/formatter.js
export function formatCurrency(amount) {
  return `$${amount.toFixed(2)}`
}

export function truncateText(text, maxLength) {
  if (text.length <= maxLength) return text
  return text.slice(0, maxLength) + '...'
}
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/formatter.spec.js
import { formatCurrency, truncateText } from '@/utils/formatter'
import { describe, it, expect } from 'vitest'

describe('formatCurrency', () => {
  it('formats number as currency', () => {
    expect(formatCurrency(100)).toBe('$100.00')
    expect(formatCurrency(99.5)).toBe('$99.50')
  })
})

describe('truncateText', () => {
  it('returns text as is if under max length', () => {
    expect(truncateText('Hello', 10)).toBe('Hello')
  })

  it('truncates text with ellipsis', () => {
    expect(truncateText('Hello World', 5)).toBe('Hello...')
  })
})
```

---

### å››ã€ç»„ä»¶æµ‹è¯•æœ€ä½³å®è·µ

#### 1. æµ‹è¯•ç”¨æˆ·äº¤äº’

```vue
<!-- components/TodoList.vue -->
<template>
  <div>
    <input v-model="newTodo" @keyup.enter="addTodo" placeholder="Add todo" />
    <ul>
      <li v-for="todo in todos" :key="todo.id" :data-testid="`todo-${todo.id}`">
        {{ todo.text }}
        <button @click="removeTodo(todo.id)">Delete</button>
      </li>
    </ul>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const todos = ref([])
const newTodo = ref('')
let nextId = 1

const addTodo = () => {
  if (newTodo.value.trim()) {
    todos.value.push({ id: nextId++, text: newTodo.value })
    newTodo.value = ''
  }
}

const removeTodo = (id) => {
  todos.value = todos.value.filter(t => t.id !== id)
}
</script>
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/components/TodoList.spec.js
import { mount } from '@vue/test-utils'
import TodoList from '@/components/TodoList.vue'
import { describe, it, expect } from 'vitest'

describe('TodoList.vue', () => {
  it('adds a new todo on enter key', async () => {
    const wrapper = mount(TodoList)
    const input = wrapper.find('input')

    // è¾“å…¥æ–‡æœ¬å¹¶æŒ‰ Enter
    await input.setValue('Buy milk')
    await input.trigger('keyup.enter')

    // éªŒè¯ todo è¢«æ·»åŠ 
    expect(wrapper.text()).toContain('Buy milk')
    expect(wrapper.findAll('li')).toHaveLength(1)

    // éªŒè¯è¾“å…¥æ¡†è¢«æ¸…ç©º
    expect(input.element.value).toBe('')
  })

  it('removes a todo when delete button is clicked', async () => {
    const wrapper = mount(TodoList, {
      data() {
        return {
          todos: [{ id: 1, text: 'Test Todo' }]
        }
      }
    })

    expect(wrapper.text()).toContain('Test Todo')

    await wrapper.find('button').trigger('click')

    expect(wrapper.text()).not.toContain('Test Todo')
    expect(wrapper.findAll('li')).toHaveLength(0)
  })

  it('does not add empty todos', async () => {
    const wrapper = mount(TodoList)
    const input = wrapper.find('input')

    await input.setValue('   ') // åªæœ‰ç©ºæ ¼
    await input.trigger('keyup.enter')

    expect(wrapper.findAll('li')).toHaveLength(0)
  })
})
```

#### 2. æµ‹è¯• Props å’Œ Events

```vue
<!-- components/UserCard.vue -->
<template>
  <div class="user-card">
    <h3>{{ user.name }}</h3>
    <p>{{ user.email }}</p>
    <button @click="$emit('edit', user.id)">Edit</button>
    <button @click="$emit('delete', user.id)">Delete</button>
  </div>
</template>

<script setup>
defineProps({
  user: {
    type: Object,
    required: true
  }
})

defineEmits(['edit', 'delete'])
</script>
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/components/UserCard.spec.js
import { mount } from '@vue/test-utils'
import UserCard from '@/components/UserCard.vue'
import { describe, it, expect } from 'vitest'

describe('UserCard.vue', () => {
  const user = { id: 1, name: 'John Doe', email: 'john@example.com' }

  it('displays user information', () => {
    const wrapper = mount(UserCard, {
      props: { user }
    })

    expect(wrapper.text()).toContain('John Doe')
    expect(wrapper.text()).toContain('john@example.com')
  })

  it('emits edit event with user id', async () => {
    const wrapper = mount(UserCard, {
      props: { user }
    })

    await wrapper.find('button[data-testid="edit"]').trigger('click')

    expect(wrapper.emitted()).toHaveProperty('edit')
    expect(wrapper.emitted('edit')[0]).toEqual([1])
  })

  it('emits delete event with user id', async () => {
    const wrapper = mount(UserCard, {
      props: { user }
    })

    await wrapper.find('button[data-testid="delete"]').trigger('click')

    expect(wrapper.emitted('delete')[0]).toEqual([1])
  })
})
```

#### 3. æµ‹è¯•å¼‚æ­¥æ“ä½œ

```vue
<!-- components/UserProfile.vue -->
<template>
  <div>
    <div v-if="loading">Loading...</div>
    <div v-else-if="error">Error: {{ error }}</div>
    <div v-else>
      <h2>{{ user.name }}</h2>
      <p>{{ user.bio }}</p>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { fetchUser } from '@/api/users'

const props = defineProps({
  userId: Number
})

const user = ref(null)
const loading = ref(true)
const error = ref(null)

onMounted(async () => {
  try {
    user.value = await fetchUser(props.userId)
  } catch (e) {
    error.value = e.message
  } finally {
    loading.value = false
  }
})
</script>
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/components/UserProfile.spec.js
import { mount, flushPromises } from '@vue/test-utils'
import UserProfile from '@/components/UserProfile.vue'
import { fetchUser } from '@/api/users'
import { describe, it, expect, vi, beforeEach } from 'vitest'

// Mock API å‡½æ•°
vi.mock('@/api/users', () => ({
  fetchUser: vi.fn()
}))

describe('UserProfile.vue', () => {
  beforeEach(() => {
    vi.clearAllMocks()
  })

  it('displays loading state initially', () => {
    fetchUser.mockReturnValue(new Promise(() => {})) // æ°¸ä¸ resolve

    const wrapper = mount(UserProfile, {
      props: { userId: 1 }
    })

    expect(wrapper.text()).toContain('Loading...')
  })

  it('displays user data after successful fetch', async () => {
    fetchUser.mockResolvedValue({
      name: 'John Doe',
      bio: 'Software Engineer'
    })

    const wrapper = mount(UserProfile, {
      props: { userId: 1 }
    })

    await flushPromises() // ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆ

    expect(wrapper.text()).toContain('John Doe')
    expect(wrapper.text()).toContain('Software Engineer')
    expect(wrapper.text()).not.toContain('Loading...')
  })

  it('displays error message on fetch failure', async () => {
    fetchUser.mockRejectedValue(new Error('Network error'))

    const wrapper = mount(UserProfile, {
      props: { userId: 1 }
    })

    await flushPromises()

    expect(wrapper.text()).toContain('Error: Network error')
  })
})
```

#### 4. æµ‹è¯•æ’æ§½ï¼ˆSlotsï¼‰

```vue
<!-- components/Card.vue -->
<template>
  <div class="card">
    <header v-if="$slots.header">
      <slot name="header"></slot>
    </header>
    <main>
      <slot></slot>
    </main>
    <footer v-if="$slots.footer">
      <slot name="footer"></slot>
    </footer>
  </div>
</template>
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/components/Card.spec.js
import { mount } from '@vue/test-utils'
import Card from '@/components/Card.vue'
import { describe, it, expect } from 'vitest'

describe('Card.vue', () => {
  it('renders default slot content', () => {
    const wrapper = mount(Card, {
      slots: {
        default: '<p>Main content</p>'
      }
    })

    expect(wrapper.html()).toContain('<p>Main content</p>')
  })

  it('renders named slots', () => {
    const wrapper = mount(Card, {
      slots: {
        header: '<h1>Title</h1>',
        default: '<p>Body</p>',
        footer: '<small>Footer</small>'
      }
    })

    expect(wrapper.html()).toContain('<h1>Title</h1>')
    expect(wrapper.html()).toContain('<p>Body</p>')
    expect(wrapper.html()).toContain('<small>Footer</small>')
  })

  it('hides header when no slot provided', () => {
    const wrapper = mount(Card, {
      slots: {
        default: '<p>Content</p>'
      }
    })

    expect(wrapper.find('header').exists()).toBe(false)
  })
})
```

#### 5. æµ‹è¯• Vuex/Pinia çŠ¶æ€ç®¡ç†

**Pinia ç¤ºä¾‹ï¼š**
```javascript
// stores/counter.js
import { defineStore } from 'pinia'

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0
  }),
  actions: {
    increment() {
      this.count++
    }
  }
})
```

**æµ‹è¯•ä»£ç ï¼š**
```javascript
// tests/stores/counter.spec.js
import { setActivePinia, createPinia } from 'pinia'
import { useCounterStore } from '@/stores/counter'
import { describe, it, expect, beforeEach } from 'vitest'

describe('Counter Store', () => {
  beforeEach(() => {
    setActivePinia(createPinia())
  })

  it('initializes with count 0', () => {
    const store = useCounterStore()
    expect(store.count).toBe(0)
  })

  it('increments count', () => {
    const store = useCounterStore()
    store.increment()
    expect(store.count).toBe(1)
  })
})
```

**åœ¨ç»„ä»¶ä¸­æµ‹è¯• Storeï¼š**
```javascript
import { mount } from '@vue/test-utils'
import { createPinia } from 'pinia'
import CounterComponent from '@/components/CounterComponent.vue'

describe('CounterComponent with Pinia', () => {
  it('uses counter store', () => {
    const wrapper = mount(CounterComponent, {
      global: {
        plugins: [createPinia()]
      }
    })

    expect(wrapper.text()).toContain('Count: 0')

    wrapper.find('button').trigger('click')

    expect(wrapper.text()).toContain('Count: 1')
  })
})
```

---

### äº”ã€æµ‹è¯•æœ€ä½³å®è·µ

#### 1. ä½¿ç”¨ data-testid å®šä½å…ƒç´ 

```vue
<!-- âœ… å¥½ï¼šä½¿ç”¨ data-testid -->
<button data-testid="submit-button">Submit</button>

<!-- âŒ å·®ï¼šä¾èµ– class æˆ–æ–‡æœ¬ -->
<button class="btn btn-primary">Submit</button>
```

**åŸå› ï¼š**
- class å¯èƒ½å› æ ·å¼å˜åŒ–è€Œæ”¹å˜
- æ–‡æœ¬å¯èƒ½å› å›½é™…åŒ–è€Œå˜åŒ–
- `data-testid` æ˜ç¡®è¡¨ç¤ºæµ‹è¯•ç”¨é€”

#### 2. æµ‹è¯•è¡Œä¸ºï¼Œè€Œéå®ç°ç»†èŠ‚

```javascript
// âŒ å·®ï¼šæµ‹è¯•å†…éƒ¨çŠ¶æ€
it('sets loading to true', () => {
  wrapper.vm.loading = true
  expect(wrapper.vm.loading).toBe(true)
})

// âœ… å¥½ï¼šæµ‹è¯•ç”¨æˆ·å¯è§çš„è¡Œä¸º
it('shows loading indicator', async () => {
  wrapper.vm.fetchData()
  await wrapper.vm.$nextTick()
  expect(wrapper.find('[data-testid="loading"]').exists()).toBe(true)
})
```

#### 3. ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§

```javascript
// âŒ å·®ï¼šæµ‹è¯•ä¹‹é—´æœ‰ä¾èµ–
let wrapper
beforeAll(() => {
  wrapper = mount(Component)
})

it('test 1', () => {
  wrapper.vm.count++ // ä¿®æ”¹äº†çŠ¶æ€
})

it('test 2', () => {
  expect(wrapper.vm.count).toBe(0) // âŒ ä¾èµ–ä¸Šä¸€ä¸ªæµ‹è¯•
})

// âœ… å¥½ï¼šæ¯ä¸ªæµ‹è¯•ç‹¬ç«‹
beforeEach(() => {
  wrapper = mount(Component)
})

it('test 1', () => {
  wrapper.vm.count++
  expect(wrapper.vm.count).toBe(1)
})

it('test 2', () => {
  expect(wrapper.vm.count).toBe(0) // âœ… ç‹¬ç«‹éªŒè¯
})
```

#### 4. ä½¿ç”¨å·¥å‚å‡½æ•°åˆ›å»ºæµ‹è¯•æ•°æ®

```javascript
// tests/factories/user.js
export function createUser(overrides = {}) {
  return {
    id: 1,
    name: 'John Doe',
    email: 'john@example.com',
    role: 'user',
    ...overrides
  }
}

// ä½¿ç”¨
import { createUser } from './factories/user'

it('displays admin badge for admin users', () => {
  const adminUser = createUser({ role: 'admin' })
  const wrapper = mount(UserCard, {
    props: { user: adminUser }
  })
  expect(wrapper.find('.admin-badge').exists()).toBe(true)
})
```

#### 5. Mock å¤–éƒ¨ä¾èµ–

```javascript
// âŒ å·®ï¼šä¾èµ–çœŸå® API
import axios from 'axios'

it('fetches data', async () => {
  const data = await axios.get('/api/users') // çœŸå®è¯·æ±‚
  // ...
})

// âœ… å¥½ï¼šMock API
vi.mock('axios')

it('fetches data', async () => {
  axios.get.mockResolvedValue({ data: [{ id: 1, name: 'John' }] })
  const data = await fetchUsers()
  expect(data).toHaveLength(1)
})
```

#### 6. æµ‹è¯•è¾¹ç•Œæƒ…å†µ

```javascript
describe('formatPrice', () => {
  it('handles normal prices', () => {
    expect(formatPrice(10.5)).toBe('$10.50')
  })

  it('handles zero', () => {
    expect(formatPrice(0)).toBe('$0.00')
  })

  it('handles negative numbers', () => {
    expect(formatPrice(-5)).toBe('-$5.00')
  })

  it('handles very large numbers', () => {
    expect(formatPrice(9999999.99)).toBe('$9,999,999.99')
  })

  it('throws error for non-numbers', () => {
    expect(() => formatPrice('abc')).toThrow()
  })
})
```

---

### å…­ã€ä»£ç è¦†ç›–ç‡

**é…ç½®è¦†ç›–ç‡æŠ¥å‘Šï¼š**
```javascript
// vite.config.js
export default defineConfig({
  test: {
    coverage: {
      provider: 'v8', // æˆ– 'istanbul'
      reporter: ['text', 'html', 'lcov'],
      include: ['src/**/*.{js,vue}'],
      exclude: [
        'src/main.js',
        'src/**/*.spec.js',
        'src/**/__tests__/*'
      ],
      statements: 80,
      branches: 80,
      functions: 80,
      lines: 80
    }
  }
})
```

**è¿è¡Œè¦†ç›–ç‡æµ‹è¯•ï¼š**
```bash
npm run test -- --coverage
```

**è§£è¯»è¦†ç›–ç‡æŒ‡æ ‡ï¼š**
- **Statementsï¼ˆè¯­å¥è¦†ç›–ï¼‰**ï¼šæ‰§è¡Œäº†å¤šå°‘è¯­å¥
- **Branchesï¼ˆåˆ†æ”¯è¦†ç›–ï¼‰**ï¼šif/else çš„æ‰€æœ‰åˆ†æ”¯æ˜¯å¦éƒ½æµ‹è¯•åˆ°
- **Functionsï¼ˆå‡½æ•°è¦†ç›–ï¼‰**ï¼šè°ƒç”¨äº†å¤šå°‘å‡½æ•°
- **Linesï¼ˆè¡Œè¦†ç›–ï¼‰**ï¼šæ‰§è¡Œäº†å¤šå°‘è¡Œä»£ç 

**ç›®æ ‡ï¼š**
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼š90%+
- å·¥å…·å‡½æ•°ï¼š100%
- UI ç»„ä»¶ï¼š70-80%
- æ•´ä½“é¡¹ç›®ï¼š80%+

---

### ä¸ƒã€CI/CD é›†æˆ

**GitHub Actions ç¤ºä¾‹ï¼š**
```yaml
# .github/workflows/test.yml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - run: npm ci
      - run: npm run test:unit
      - run: npm run test:e2e
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info
```

---

### æ€»ç»“

Vue æµ‹è¯•çš„æœ€ä½³å®è·µï¼š

1. **å·¥å…·é€‰æ‹©**ï¼šVitestï¼ˆå•å…ƒï¼‰ + Vue Test Utilsï¼ˆç»„ä»¶ï¼‰ + Playwrightï¼ˆE2Eï¼‰
2. **æµ‹è¯•åŸåˆ™**ï¼šæµ‹è¯•è¡Œä¸ºè€Œéå®ç°ã€ä¿æŒç‹¬ç«‹æ€§ã€ä½¿ç”¨è¯­ä¹‰åŒ–å®šä½å™¨
3. **è¦†ç›–èŒƒå›´**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ > å·¥å…·å‡½æ•° > UI ç»„ä»¶
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šMock å¤–éƒ¨ä¾èµ–ã€å¹¶è¡Œè¿è¡Œæµ‹è¯•ã€ä½¿ç”¨å¿«ç…§æµ‹è¯•ï¼ˆæ…ç”¨ï¼‰
5. **å›¢é˜Ÿåä½œ**ï¼šå¼ºåˆ¶è¦†ç›–ç‡é—¨æ§›ã€ä»£ç å®¡æŸ¥åŒ…å«æµ‹è¯•ã€CI/CD è‡ªåŠ¨åŒ–

å¥½çš„æµ‹è¯•ä¸ä»…èƒ½æ•è· bugï¼Œæ›´èƒ½ä½œä¸ºæ´»æ–‡æ¡£ï¼Œå¸®åŠ©å›¢é˜Ÿç†è§£ä»£ç æ„å›¾ï¼Œæå‡é‡æ„ä¿¡å¿ƒã€‚
