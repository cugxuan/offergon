---
title: React Server Components çš„åŸç†å’Œä¼˜åŠ¿
tags:
  - å‰ç«¯React
status: robot
class: å‰ç«¯React
slug: react-server-components-principles-advantages
ref:
---

## æ ¸å¿ƒè¦ç‚¹

**React Server Components (RSC) æ˜¯ React 18 å¼•å…¥çš„å…¨æ–°æ¶æ„ï¼Œå…è®¸ç»„ä»¶åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“å¹¶ç›´æ¥è®¿é—®åç«¯èµ„æºï¼Œé›¶ JS æ‰“åŒ…ä½“ç§¯ï¼Œå®ç°æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚**

æ ¸å¿ƒç‰¹æ€§ï¼š
- ğŸ¯ æœåŠ¡å™¨ç»„ä»¶ä¸å‘é€åˆ°å®¢æˆ·ç«¯ï¼ˆé›¶æ‰“åŒ…ä½“ç§¯ï¼‰
- ğŸ”Œ ç›´æ¥è®¿é—®æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰åç«¯èµ„æº
- ğŸš€ ä¸å®¢æˆ·ç«¯ç»„ä»¶æ— ç¼åä½œ
- ğŸ“¦ è‡ªåŠ¨ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- ğŸŒŠ æ”¯æŒæµå¼æ¸²æŸ“ (Streaming SSR)

---

## è¯¦ç»†è§£ç­”

### ä¸€ã€ä»€ä¹ˆæ˜¯ React Server Components

React Server Components æ˜¯ä¸€ç§æ–°çš„ç»„ä»¶ç±»å‹ï¼Œå®ƒåœ¨**æœåŠ¡å™¨ç«¯æ‰§è¡Œå¹¶æ¸²æŸ“**ï¼Œä¸ä¼šè¢«æ‰“åŒ…åˆ°å®¢æˆ·ç«¯ JavaScript bundle ä¸­ã€‚

#### ç»„ä»¶ç±»å‹å¯¹æ¯”

```jsx
// âŒ ä¼ ç»Ÿ SSRï¼šæ‰€æœ‰ç»„ä»¶éƒ½ä¼šè¢«æ‰“åŒ…åˆ°å®¢æˆ·ç«¯
// server.js
const html = ReactDOMServer.renderToString(<App />)
// client.js ä»éœ€å®Œæ•´çš„ App ç»„ä»¶ä»£ç ç”¨äº hydration

// âœ… RSCï¼šæœåŠ¡å™¨ç»„ä»¶ä¸å‘é€åˆ°å®¢æˆ·ç«¯
// ProductList.server.jsx (æœåŠ¡å™¨ç»„ä»¶)
async function ProductList() {
  // ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œä¸éœ€è¦ API å±‚
  const products = await db.query('SELECT * FROM products')
  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} data={product} />
      ))}
    </div>
  )
}

// ProductCard.client.jsx (å®¢æˆ·ç«¯ç»„ä»¶)
'use client'
export default function ProductCard({ data }) {
  const [liked, setLiked] = useState(false)
  // äº¤äº’é€»è¾‘åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ
  return (
    <div onClick={() => setLiked(!liked)}>
      {data.name} {liked && 'â¤ï¸'}
    </div>
  )
}
```

### äºŒã€RSC çš„å·¥ä½œåŸç†

#### 1. æ¸²æŸ“æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. å®¢æˆ·ç«¯è¯·æ±‚é¡µé¢                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æœåŠ¡å™¨æ‰§è¡Œ Server Components                 â”‚
â”‚     - è®¿é—®æ•°æ®åº“/æ–‡ä»¶ç³»ç»Ÿ                         â”‚
â”‚     - æ‰§è¡Œå¼‚æ­¥æ•°æ®è·å–                            â”‚
â”‚     - æ¸²æŸ“æˆ React Element Tree                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. åºåˆ—åŒ–ä¸ºç‰¹æ®Šæ ¼å¼ï¼ˆReact Server Payloadï¼‰      â”‚
â”‚     - ä¸æ˜¯ HTMLï¼Œè€Œæ˜¯ JSON-like æµå¼æ•°æ®         â”‚
â”‚     - åŒ…å«æ¸²æŸ“ç»“æœå’Œå®¢æˆ·ç«¯ç»„ä»¶çš„å¼•ç”¨              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. å®¢æˆ·ç«¯æ¥æ”¶å¹¶é‡æ„è™šæ‹Ÿ DOM                      â”‚
â”‚     - ä¿ç•™ Client Components çš„äº¤äº’èƒ½åŠ›          â”‚
â”‚     - æŒ‰éœ€åŠ è½½å®¢æˆ·ç«¯ç»„ä»¶ä»£ç                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. RSC Payload æ ¼å¼ç¤ºä¾‹

```javascript
// æœåŠ¡å™¨å‘é€çš„æ•°æ®æ ¼å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰
{
  "J0": {
    "type": "div",
    "props": {
      "children": [
        "M1", // å¼•ç”¨æ¨¡å— 1ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰
        {
          "type": "span",
          "props": { "children": "æœåŠ¡å™¨æ•°æ®ï¼šå…± 100 ä¸ªå•†å“" }
        }
      ]
    }
  },
  "M1": {
    "id": "./ProductCard.client.jsx",
    "chunks": ["chunk-123.js"], // å®¢æˆ·ç«¯ç»„ä»¶çš„ä»£ç å—
    "props": { "data": { "id": 1, "name": "å•†å“ A" } }
  }
}
```

#### 3. æ ¸å¿ƒæ¦‚å¿µï¼šé›¶æ‰“åŒ…å¼€é”€

```jsx
// Big.server.jsx (æœåŠ¡å™¨ç»„ä»¶)
import { format } from 'date-fns' // ğŸ“¦ 300KB åº“
import { marked } from 'marked'    // ğŸ“¦ 50KB åº“

async function ArticlePage({ id }) {
  const article = await db.articles.findById(id)

  // è¿™äº›é‡å‹åº“åªåœ¨æœåŠ¡å™¨è¿è¡Œï¼Œä¸ä¼šè¢«æ‰“åŒ…åˆ°å®¢æˆ·ç«¯ï¼
  const formattedDate = format(new Date(article.date), 'PPP')
  const html = marked(article.content)

  return (
    <article>
      <time>{formattedDate}</time>
      <div dangerouslySetInnerHTML={{ __html: html }} />
    </article>
  )
}
```

**ç»“æœ**ï¼šå®¢æˆ·ç«¯ bundle ä½“ç§¯ä¸º **0KB**ï¼ˆä¸åŒ…å« date-fns å’Œ markedï¼‰

### ä¸‰ã€Server Components vs Client Components

| ç‰¹æ€§ | Server Components | Client Components |
|------|-------------------|-------------------|
| **æ‰§è¡Œä½ç½®** | ä»…æœåŠ¡å™¨ | æœåŠ¡å™¨ + å®¢æˆ·ç«¯ |
| **æ–‡ä»¶æ ‡è¯†** | `.server.jsx` æˆ–é»˜è®¤ | éœ€è¦ `'use client'` å£°æ˜ |
| **æ‰“åŒ…ä½“ç§¯** | ä¸è®¡å…¥å®¢æˆ·ç«¯ bundle | è®¡å…¥å®¢æˆ·ç«¯ bundle |
| **æ•°æ®è·å–** | ç›´æ¥è®¿é—®åç«¯èµ„æº | éœ€è¦é€šè¿‡ API |
| **äº¤äº’èƒ½åŠ›** | æ— ï¼ˆæ— çŠ¶æ€ã€æ— äº‹ä»¶ï¼‰ | æ”¯æŒ state/events/hooks |
| **é‡æ–°æ¸²æŸ“** | éœ€è¦æœåŠ¡å™¨è¯·æ±‚ | å®¢æˆ·ç«¯ç«‹å³å“åº” |
| **Props ç±»å‹** | å¯åºåˆ—åŒ–æ•°æ® + ç»„ä»¶ | å¯åºåˆ—åŒ–æ•°æ®ï¼ˆä¸å«å‡½æ•°ï¼‰ |

#### ä½¿ç”¨è§„åˆ™

```jsx
// âœ… å…è®¸ï¼šServer Component åŒ…å« Client Component
// Page.server.jsx
import ClientButton from './Button.client.jsx'

export default function Page() {
  const data = await fetchData() // æœåŠ¡å™¨æ•°æ®è·å–
  return (
    <div>
      <h1>{data.title}</h1>
      <ClientButton /> {/* å®¢æˆ·ç«¯äº¤äº’ */}
    </div>
  )
}

// âœ… å…è®¸ï¼šé€šè¿‡ children ä¼ é€’ Server Component åˆ° Client Component
// Layout.client.jsx
'use client'
export default function Layout({ children }) {
  const [theme, setTheme] = useState('light')
  return <div className={theme}>{children}</div>
}

// Page.server.jsx
export default function Page() {
  return (
    <Layout>
      <ServerContent /> {/* âœ… æœåŠ¡å™¨ç»„ä»¶é€šè¿‡ children ä¼ é€’ */}
    </Layout>
  )
}

// âŒ ç¦æ­¢ï¼šClient Component ç›´æ¥å¯¼å…¥ Server Component
// Button.client.jsx
'use client'
import ServerData from './Data.server.jsx' // âŒ ç¼–è¯‘é”™è¯¯

export default function Button() {
  return <button><ServerData /></button>
}
```

### å››ã€RSC çš„æ ¸å¿ƒä¼˜åŠ¿

#### 1. æ€§èƒ½ä¼˜åŠ¿ï¼šæ›´å°çš„ Bundle ä½“ç§¯

**æ¡ˆä¾‹**ï¼šç”µå•†å•†å“è¯¦æƒ…é¡µ

```jsx
// ä¼ ç»Ÿ CSRï¼šå®¢æˆ·ç«¯éœ€è¦ä¸‹è½½æ‰€æœ‰ä¾èµ–
import Markdown from 'react-markdown'        // ğŸ“¦ 100KB
import { Gallery } from 'react-image-gallery' // ğŸ“¦ 80KB
import { addToCart } from './api'

function ProductPage({ id }) {
  const [product, setProduct] = useState(null)

  useEffect(() => {
    fetch(`/api/products/${id}`).then(r => r.json()).then(setProduct)
  }, [id])

  if (!product) return <Loading />

  return (
    <div>
      <Gallery images={product.images} />
      <Markdown>{product.description}</Markdown>
      <button onClick={() => addToCart(product.id)}>åŠ å…¥è´­ç‰©è½¦</button>
    </div>
  )
}
// æ€» bundle ä½“ç§¯ï¼š~250KBï¼ˆå‹ç¼©å‰ï¼‰
```

```jsx
// RSC æ–¹æ¡ˆï¼šåªæœ‰äº¤äº’éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯
// ProductPage.server.jsx
import { marked } from 'marked' // ğŸ“¦ æœåŠ¡å™¨ï¼Œ0 å®¢æˆ·ç«¯ä½“ç§¯
import db from './db'

export default async function ProductPage({ id }) {
  const product = await db.products.findById(id) // ç›´æ¥æŸ¥è¯¢æ•°æ®åº“
  const descriptionHtml = marked(product.description)

  return (
    <div>
      <ServerImageGallery images={product.images} />
      <div dangerouslySetInnerHTML={{ __html: descriptionHtml }} />
      <AddToCartButton productId={product.id} /> {/* å®¢æˆ·ç«¯ç»„ä»¶ */}
    </div>
  )
}

// AddToCartButton.client.jsx
'use client'
export default function AddToCartButton({ productId }) {
  const [loading, setLoading] = useState(false)

  const handleClick = async () => {
    setLoading(true)
    await fetch('/api/cart', { method: 'POST', body: JSON.stringify({ productId }) })
    setLoading(false)
  }

  return <button onClick={handleClick} disabled={loading}>åŠ å…¥è´­ç‰©è½¦</button>
}
// å®¢æˆ·ç«¯ bundle ä½“ç§¯ï¼š~5KBï¼ˆä»…æŒ‰é’®äº¤äº’é€»è¾‘ï¼‰
```

**æ€§èƒ½æå‡**ï¼š
- ğŸ“¦ Bundle ä½“ç§¯å‡å°‘ **98%** (250KB â†’ 5KB)
- âš¡ FCP (First Contentful Paint) æå‡ **2-3x**
- ğŸ¯ TTI (Time to Interactive) æå‡ **5x**

#### 2. æ•°æ®è·å–ä¼˜åŠ¿ï¼šæ¶ˆé™¤ç€‘å¸ƒè¯·æ±‚

**ä¼ ç»Ÿæ–¹æ¡ˆçš„ç€‘å¸ƒé—®é¢˜**ï¼š

```jsx
// âŒ ä¼ ç»Ÿ CSRï¼š3 å±‚ç€‘å¸ƒè¯·æ±‚
function App() {
  const [user, setUser] = useState(null)

  useEffect(() => {
    fetch('/api/user').then(r => r.json()).then(setUser) // è¯·æ±‚ 1
  }, [])

  if (!user) return <Loading />
  return <Dashboard user={user} />
}

function Dashboard({ user }) {
  const [projects, setProjects] = useState(null)

  useEffect(() => {
    fetch(`/api/users/${user.id}/projects`).then(r => r.json()).then(setProjects) // è¯·æ±‚ 2
  }, [user.id])

  if (!projects) return <Loading />
  return projects.map(p => <Project id={p.id} />)
}

function Project({ id }) {
  const [data, setData] = useState(null)

  useEffect(() => {
    fetch(`/api/projects/${id}`).then(r => r.json()).then(setData) // è¯·æ±‚ 3
  }, [id])

  if (!data) return <Loading />
  return <div>{data.name}</div>
}

// æ—¶é—´çº¿ï¼š
// 0ms    â”€â”€â”€â”€â”€> è¯·æ±‚ç”¨æˆ·æ•°æ®
// 500ms  â”€â”€â”€â”€â”€> è¯·æ±‚é¡¹ç›®åˆ—è¡¨
// 1000ms â”€â”€â”€â”€â”€> è¯·æ±‚é¡¹ç›®è¯¦æƒ…
// 1500ms æ¸²æŸ“å®Œæˆ âŒ æ€»è€—æ—¶ 1500ms
```

**RSC æ–¹æ¡ˆï¼šå¹¶è¡Œæ•°æ®è·å–**ï¼š

```jsx
// âœ… RSCï¼šåœ¨æœåŠ¡å™¨å¹¶è¡Œè·å–æ‰€æœ‰æ•°æ®
// App.server.jsx
async function App() {
  const user = await db.users.getCurrent() // æœåŠ¡å™¨ç›´æ¥æŸ¥è¯¢
  return <Dashboard userId={user.id} />
}

// Dashboard.server.jsx
async function Dashboard({ userId }) {
  const projects = await db.projects.findByUser(userId)

  // å¹¶è¡Œè·å–æ‰€æœ‰é¡¹ç›®è¯¦æƒ…
  const projectsData = await Promise.all(
    projects.map(p => db.projects.findById(p.id))
  )

  return projectsData.map(data => <Project data={data} />)
}

// æ—¶é—´çº¿ï¼ˆæœåŠ¡å™¨å†…ç½‘é€Ÿåº¦ <10msï¼‰ï¼š
// 0ms   â”€â”€â”€â”€â”€> å¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰æ•°æ®
// 50ms  æ¸²æŸ“å®Œæˆ âœ… æ€»è€—æ—¶ 50msï¼ˆ30x é€Ÿåº¦æå‡ï¼ï¼‰
```

#### 3. è‡ªåŠ¨ä»£ç åˆ†å‰²

```jsx
// ä¼ ç»Ÿæ–¹æ¡ˆï¼šéœ€è¦æ‰‹åŠ¨ lazy
const HeavyChart = React.lazy(() => import('./HeavyChart'))

function Dashboard() {
  return (
    <Suspense fallback={<Spinner />}>
      <HeavyChart data={data} />
    </Suspense>
  )
}

// RSC æ–¹æ¡ˆï¼šè‡ªåŠ¨æŒ‰ç»„ä»¶è¾¹ç•Œåˆ†å‰²
// Dashboard.server.jsx
import ClientChart from './Chart.client.jsx' // è‡ªåŠ¨åˆ†å‰²ï¼

export default async function Dashboard() {
  const data = await db.analytics.get()
  return <ClientChart data={data} />
}
// Chart.client.jsx ä¼šè‡ªåŠ¨æˆä¸ºç‹¬ç«‹çš„ chunk
```

#### 4. å®‰å…¨æ€§ä¼˜åŠ¿

```jsx
// âœ… æ•æ„Ÿé€»è¾‘å’Œå¯†é’¥åªåœ¨æœåŠ¡å™¨å­˜åœ¨
// UserProfile.server.jsx
import { decrypt } from './crypto' // åŠ å¯†åº“ä¸æš´éœ²ç»™å®¢æˆ·ç«¯

async function UserProfile({ id }) {
  const user = await db.users.findById(id)

  // æœåŠ¡å™¨ç«¯è§£å¯†æ•æ„Ÿä¿¡æ¯
  const email = decrypt(user.encryptedEmail, process.env.SECRET_KEY)

  // æ ¹æ®æƒé™è¿‡æ»¤æ•°æ®
  if (!hasPermission(user, 'view_salary')) {
    delete user.salary
  }

  return <ProfileCard user={user} email={email} />
}
// å®¢æˆ·ç«¯æ°¸è¿œçœ‹ä¸åˆ° SECRET_KEY å’ŒåŠ å¯†é€»è¾‘
```

### äº”ã€å®é™…åº”ç”¨åœºæ™¯

#### 1. åšå®¢æ–‡ç« é¡µé¢

```jsx
// ArticlePage.server.jsx
import { marked } from 'marked'
import { readFile } from 'fs/promises'
import { Prism } from 'prism-react-renderer'

export default async function ArticlePage({ slug }) {
  // ç›´æ¥è¯»å–æ–‡ä»¶ç³»ç»Ÿ
  const content = await readFile(`./articles/${slug}.md`, 'utf-8')
  const html = marked(content)

  // æœåŠ¡å™¨æ¸²æŸ“ä»£ç é«˜äº®ï¼ˆé‡å‹åº“ä¸å‘é€åˆ°å®¢æˆ·ç«¯ï¼‰
  const highlightedHtml = Prism.highlight(html)

  return (
    <article>
      <CommentSection articleId={slug} /> {/* å®¢æˆ·ç«¯äº¤äº’ */}
      <div dangerouslySetInnerHTML={{ __html: highlightedHtml }} />
    </article>
  )
}

// CommentSection.client.jsx
'use client'
export default function CommentSection({ articleId }) {
  const [comments, setComments] = useState([])

  // è¯„è®ºçš„å¢åˆ æ”¹æŸ¥é€»è¾‘
  return <div>{/* äº¤äº’å¼è¯„è®ºåŒº */}</div>
}
```

#### 2. ç”µå•†å•†å“æœç´¢

```jsx
// SearchResults.server.jsx
export default async function SearchResults({ query }) {
  // æœåŠ¡å™¨ç«¯å…¨æ–‡æœç´¢ï¼ˆä½¿ç”¨ Elasticsearch/æ•°æ®åº“ï¼‰
  const products = await searchEngine.query({
    term: query,
    filters: { inStock: true },
    sort: 'relevance'
  })

  return (
    <div>
      <SearchStats count={products.length} query={query} />
      {products.map(product => (
        <ProductCard key={product.id} data={product} />
      ))}
    </div>
  )
}

// ProductCard.client.jsx
'use client'
export default function ProductCard({ data }) {
  const [inCart, setInCart] = useState(false)

  return (
    <div>
      <img src={data.image} alt={data.name} />
      <h3>{data.name}</h3>
      <Price amount={data.price} />
      <button onClick={() => setInCart(true)}>
        {inCart ? 'å·²åŠ å…¥è´­ç‰©è½¦' : 'åŠ å…¥è´­ç‰©è½¦'}
      </button>
    </div>
  )
}
```

### å…­ã€ä¸ä¼ ç»Ÿ SSR çš„å¯¹æ¯”

| ç»´åº¦ | ä¼ ç»Ÿ SSR | React Server Components |
|------|---------|------------------------|
| **Hydration** | éœ€è¦å®Œæ•´ hydration | æœåŠ¡å™¨ç»„ä»¶æ— éœ€ hydration |
| **é‡æ–°æ¸²æŸ“** | éœ€è¦å®Œæ•´é¡µé¢å¯¼èˆª | å¯éƒ¨åˆ†æ›´æ–°æœåŠ¡å™¨ç»„ä»¶ |
| **ä»£ç åˆ†å‰²** | æ‰‹åŠ¨ `React.lazy` | è‡ªåŠ¨æŒ‰ç»„ä»¶è¾¹ç•Œåˆ†å‰² |
| **æ•°æ®è·å–** | getServerSideProps åˆ†ç¦» | ç»„ä»¶å†… async/await |
| **SEO** | æ”¯æŒ | æ”¯æŒ |
| **é¦–å±é€Ÿåº¦** | å¿«ï¼ˆä½†éœ€ hydrationï¼‰ | æ›´å¿«ï¼ˆæ—  hydrationï¼‰ |
| **äº¤äº’å»¶è¿Ÿ** | ä½ï¼ˆhydration åï¼‰ | æ··åˆï¼ˆå–å†³äºç»„ä»¶ç±»å‹ï¼‰ |

### ä¸ƒã€æ³¨æ„äº‹é¡¹å’Œé™åˆ¶

#### 1. ä¸èƒ½ä½¿ç”¨çš„ API

```jsx
// âŒ Server Components ä¸­ç¦æ­¢ä½¿ç”¨çš„
export default async function MyServerComponent() {
  // âŒ ä¸èƒ½ä½¿ç”¨ useState/useEffect ç­‰ Hooks
  const [state, setState] = useState(0)

  // âŒ ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨ API
  const width = window.innerWidth

  // âŒ ä¸èƒ½ä½¿ç”¨äº‹ä»¶å¤„ç†å™¨
  return <button onClick={() => alert('hi')}>Click</button>

  // âŒ ä¸èƒ½ä½¿ç”¨ Contextï¼ˆä½†å¯ä»¥è¯»å– Server Contextï¼‰
  const theme = useContext(ThemeContext)
}
```

#### 2. Props ä¼ é€’é™åˆ¶

```jsx
// âŒ ä¸èƒ½ä¼ é€’å‡½æ•°ç»™ Server Component
<ServerComponent onAction={() => {}} />

// âœ… æ­£ç¡®æ–¹å¼ï¼šé€šè¿‡ Server Actions
// ServerComponent.server.jsx
async function handleAction() {
  'use server' // Server Action æ ‡è®°
  await db.actions.create({ type: 'click' })
}

export default function ServerComponent() {
  return <form action={handleAction}>
    <button type="submit">æäº¤</button>
  </form>
}
```

#### 3. éœ€è¦ Bundler æ”¯æŒ

ç›®å‰éœ€è¦æ¡†æ¶æ”¯æŒï¼š
- âœ… **Next.js 13+ (App Router)**
- âœ… **Remix æœªæ¥ç‰ˆæœ¬**
- â³ **å…¶ä»–æ¡†æ¶é€æ­¥è·Ÿè¿›**

### å…«ã€æœ€ä½³å®è·µ

1. **æŒ‰äº¤äº’éœ€æ±‚åˆ†ç¦»ç»„ä»¶**
```jsx
// é™æ€å†…å®¹ â†’ Server Component
// äº¤äº’é€»è¾‘ â†’ Client Component
// å°½å¯èƒ½å°† 'use client' è¾¹ç•Œæ¨åˆ°å¶å­èŠ‚ç‚¹
```

2. **ä½¿ç”¨ Suspense æµå¼æ¸²æŸ“**
```jsx
// App.server.jsx
export default function App() {
  return (
    <>
      <Header /> {/* å¿«é€Ÿæ¸²æŸ“ */}
      <Suspense fallback={<Skeleton />}>
        <SlowComponent /> {/* æ…¢é€Ÿæ•°æ®è·å–ï¼Œæµå¼ä¼ è¾“ */}
      </Suspense>
    </>
  )
}
```

3. **åˆç†ä½¿ç”¨ç¼“å­˜**
```jsx
// Next.js ä¸­ç¼“å­˜æœåŠ¡å™¨ç»„ä»¶æ¸²æŸ“ç»“æœ
export const revalidate = 3600 // 1 å°æ—¶é‡æ–°éªŒè¯

export default async function ProductList() {
  const products = await fetch('https://api.example.com/products', {
    next: { revalidate: 3600 }
  })
  // ...
}
```

---

## æ€»ç»“

React Server Components ä»£è¡¨äº† React çš„èŒƒå¼è½¬å˜ï¼Œé€šè¿‡**æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„èŒè´£åˆ†ç¦»**ï¼Œå®ç°äº†ï¼š

1. **æè‡´çš„æ€§èƒ½**ï¼šé›¶æ‰“åŒ…ä½“ç§¯ + å¹¶è¡Œæ•°æ®è·å– + è‡ªåŠ¨ä»£ç åˆ†å‰²
2. **æ›´å¥½çš„å¼€å‘ä½“éªŒ**ï¼šç›´æ¥è®¿é—®åç«¯èµ„æºï¼Œæ¶ˆé™¤ API å±‚
3. **å®‰å…¨æ€§æå‡**ï¼šæ•æ„Ÿé€»è¾‘å’Œå¯†é’¥éš”ç¦»åœ¨æœåŠ¡å™¨
4. **SEO å‹å¥½**ï¼šå®Œæ•´çš„æœåŠ¡å™¨æ¸²æŸ“æ”¯æŒ

åœ¨ Next.js 13+ çš„ App Router ä¸­ï¼ŒRSC å·²æˆä¸ºé»˜è®¤æ¨¡å¼ï¼Œè¿™æ ‡å¿—ç€ React åº”ç”¨æ¶æ„çš„é‡å¤§è¿›åŒ–ã€‚æŒæ¡ RSC æ˜¯ç°ä»£ React å¼€å‘çš„å¿…å¤‡æŠ€èƒ½ã€‚
