---
title: React çš„ Suspense å’Œ Lazy æ‡’åŠ è½½æœºåˆ¶
tags:
  - å‰ç«¯React
status: robot
class: å‰ç«¯React
slug: react-suspense-lazy-loading
ref:
---

## æ ¸å¿ƒè¦ç‚¹

- **React.lazy** å®ç°ç»„ä»¶çº§åˆ«çš„ä»£ç åˆ†å‰²ï¼ŒåŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œå‡å°‘åˆå§‹åŒ…ä½“ç§¯
- **Suspense** æä¾›å£°æ˜å¼çš„åŠ è½½çŠ¶æ€å¤„ç†ï¼Œå½“å­ç»„ä»¶æœªå°±ç»ªæ—¶æ˜¾ç¤º fallback UI
- æ ¸å¿ƒåŸç†ï¼šé€šè¿‡ **throw Promise** æš‚åœæ¸²æŸ“ï¼ŒPromise resolve åé‡æ–°æ¸²æŸ“
- æ”¯æŒåœºæ™¯ï¼šç»„ä»¶æ‡’åŠ è½½ã€æ•°æ®è·å–ï¼ˆé…åˆ React 18+ï¼‰ã€æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆNext.jsï¼‰
- æœ€ä½³å®è·µï¼šé…åˆè·¯ç”±æ‡’åŠ è½½ã€é¢„åŠ è½½ã€é”™è¯¯è¾¹ç•Œä½¿ç”¨

---

## è¯¦ç»†è§£ç­”

### ä¸€ã€React.lazy çš„åŸç†å’Œä½¿ç”¨

#### 1.1 ä»€ä¹ˆæ˜¯ React.lazyï¼Ÿ

`React.lazy` æ˜¯ React 16.6 å¼•å…¥çš„å‡½æ•°ï¼Œç”¨äº**åŠ¨æ€å¯¼å…¥ç»„ä»¶**ï¼Œå®ç°ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ã€‚å®ƒè¿”å›ä¸€ä¸ªæ‡’åŠ è½½çš„ç»„ä»¶ï¼Œåªæœ‰åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰ä¼šåŠ è½½å¯¹åº”çš„ä»£ç ã€‚

```jsx
import React, { Suspense } from 'react';

// ä¼ ç»Ÿå¯¼å…¥ï¼šä¼šè¢«æ‰“åŒ…åˆ°ä¸» bundle
// import HeavyComponent from './HeavyComponent';

// æ‡’åŠ è½½ï¼šä¼šè¢«å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ª chunk
const HeavyComponent = React.lazy(() => import('./HeavyComponent'));

function App() {
  return (
    <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
      <HeavyComponent />
    </Suspense>
  );
}
```

**æ‰“åŒ…æ•ˆæœå¯¹æ¯”**ï¼š
```bash
# ä¼ ç»Ÿå¯¼å…¥
main.js (500KB) - åŒ…å«æ‰€æœ‰ç»„ä»¶ä»£ç 

# ä½¿ç”¨ lazy
main.js (100KB) - ä¸»åº”ç”¨ä»£ç 
1.chunk.js (400KB) - HeavyComponent å•ç‹¬æ‰“åŒ…
```

#### 1.2 å·¥ä½œåŸç†

**æ ¸å¿ƒæœºåˆ¶**ï¼šReact.lazy è¿”å›ä¸€ä¸ªç‰¹æ®Šç»„ä»¶ï¼Œæ¸²æŸ“æ—¶ä¼šåŠ¨æ€å¯¼å…¥æ¨¡å—ã€‚

```js
// React.lazy ç®€åŒ–å®ç°
function lazy(loader) {
  let Component = null;
  let error = null;
  let promise = null;

  return function LazyComponent(props) {
    if (Component) {
      // å·²åŠ è½½ï¼Œç›´æ¥æ¸²æŸ“
      return <Component {...props} />;
    }

    if (error) {
      // åŠ è½½å¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯
      throw error;
    }

    if (!promise) {
      // é¦–æ¬¡æ¸²æŸ“ï¼Œæ‰§è¡ŒåŠ¨æ€å¯¼å…¥
      promise = loader()
        .then(module => {
          Component = module.default || module;
        })
        .catch(err => {
          error = err;
        });
    }

    // æŠ›å‡º Promiseï¼Œè§¦å‘ Suspense
    throw promise;
  };
}
```

**åŠ è½½æµç¨‹**ï¼š
1. **é¦–æ¬¡æ¸²æŸ“**ï¼šæ‰§è¡Œ `import()` è¿”å› Promiseï¼ŒæŠ›å‡º Promise
2. **Suspense æ•è·**ï¼šæ˜¾ç¤º fallback UIï¼Œç­‰å¾… Promise resolve
3. **Promise å®Œæˆ**ï¼šé‡æ–°æ¸²æŸ“ LazyComponentï¼Œè¿”å›å®é™…ç»„ä»¶
4. **åç»­æ¸²æŸ“**ï¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ç»„ä»¶ï¼Œä¸å†åŠ è½½

#### 1.3 ä½¿ç”¨åœºæ™¯

âœ… **é€‚åˆä½¿ç”¨çš„åœºæ™¯**ï¼š
- å¤§å‹ç¬¬ä¸‰æ–¹åº“ï¼ˆå›¾è¡¨åº“ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
- è·¯ç”±é¡µé¢ï¼ˆä¸åŒé¡µé¢ä»£ç åˆ†ç¦»ï¼‰
- ä½é¢‘åŠŸèƒ½ï¼ˆç®¡ç†åå°ã€è®¾ç½®é¡µé¢ï¼‰
- æ¡ä»¶æ¸²æŸ“çš„é‡å‹ç»„ä»¶ï¼ˆModalã€Drawerï¼‰

```jsx
// åœºæ™¯ 1ï¼šè·¯ç”±æ‡’åŠ è½½
import { BrowserRouter, Routes, Route } from 'react-router-dom';

const Home = React.lazy(() => import('./pages/Home'));
const Dashboard = React.lazy(() => import('./pages/Dashboard'));
const Settings = React.lazy(() => import('./pages/Settings'));

function App() {
  return (
    <BrowserRouter>
      <Suspense fallback={<PageLoader />}>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/dashboard" element={<Dashboard />} />
          <Route path="/settings" element={<Settings />} />
        </Routes>
      </Suspense>
    </BrowserRouter>
  );
}

// åœºæ™¯ 2ï¼šæ¡ä»¶åŠ è½½é‡å‹ç»„ä»¶
function UserProfile() {
  const [showEditor, setShowEditor] = useState(false);

  const RichTextEditor = React.lazy(() => import('./RichTextEditor'));

  return (
    <div>
      <button onClick={() => setShowEditor(true)}>ç¼–è¾‘ä¸ªäººç®€ä»‹</button>
      {showEditor && (
        <Suspense fallback={<Spinner />}>
          <RichTextEditor />
        </Suspense>
      )}
    </div>
  );
}
```

#### 1.4 æ³¨æ„äº‹é¡¹

**é™åˆ¶ 1ï¼šåªèƒ½ç”¨äº default export**

```jsx
// âŒ é”™è¯¯ï¼šä¸æ”¯æŒå‘½åå¯¼å‡º
const MyComponent = React.lazy(() => import('./MyComponent').then(m => m.MyComponent));

// âœ… æ­£ç¡®ï¼šå¿…é¡»æ˜¯ default export
// MyComponent.js
export default function MyComponent() {}

// App.js
const MyComponent = React.lazy(() => import('./MyComponent'));

// ğŸ”§ è§£å†³æ–¹æ¡ˆï¼šåˆ›å»ºä¸­é—´æ¨¡å—
// LazyExports.js
export { MyComponent as default } from './MyComponent';

// App.js
const MyComponent = React.lazy(() => import('./LazyExports'));
```

**é™åˆ¶ 2ï¼šå¿…é¡»é…åˆ Suspense ä½¿ç”¨**

```jsx
// âŒ é”™è¯¯ï¼šç¼ºå°‘ Suspense
const LazyComponent = React.lazy(() => import('./Component'));
<LazyComponent /> // ä¼šæŠ¥é”™

// âœ… æ­£ç¡®
<Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
  <LazyComponent />
</Suspense>
```

---

### äºŒã€Suspense çš„åŸç†å’Œä½¿ç”¨

#### 2.1 ä»€ä¹ˆæ˜¯ Suspenseï¼Ÿ

`Suspense` æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œç”¨äº**å£°æ˜å¼åœ°å¤„ç†å¼‚æ­¥æ¸²æŸ“**ã€‚å½“å­ç»„ä»¶æœªå°±ç»ªæ—¶ï¼ˆå¦‚æ­£åœ¨åŠ è½½ï¼‰ï¼Œæ˜¾ç¤º fallback UIï¼›å°±ç»ªåæ¸²æŸ“å®é™…å†…å®¹ã€‚

```jsx
import { Suspense } from 'react';

<Suspense fallback={<LoadingSpinner />}>
  {/* è¿™é‡Œçš„ç»„ä»¶å¦‚æœæŠ›å‡º Promiseï¼Œä¼šè§¦å‘ Suspense */}
  <AsyncComponent />
</Suspense>
```

#### 2.2 å·¥ä½œåŸç†

**æ ¸å¿ƒæœºåˆ¶**ï¼šé€šè¿‡ **try-catch æ•è· Promise** å®ç°å¼‚æ­¥çŠ¶æ€ç®¡ç†ã€‚

```js
// Suspense ç®€åŒ–å®ç°
class Suspense extends React.Component {
  state = { pending: false };

  componentDidCatch(error) {
    // æ•è·å­ç»„ä»¶æŠ›å‡ºçš„ Promise
    if (error instanceof Promise) {
      this.setState({ pending: true });

      error.then(() => {
        // Promise resolve åï¼Œé‡æ–°æ¸²æŸ“
        this.setState({ pending: false });
      });
    } else {
      throw error; // å…¶ä»–é”™è¯¯ç»§ç»­æŠ›å‡º
    }
  }

  render() {
    if (this.state.pending) {
      return this.props.fallback; // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    }
    return this.props.children; // æ˜¾ç¤ºå®é™…å†…å®¹
  }
}
```

**æ¸²æŸ“æµç¨‹å›¾**ï¼š
```
æ¸²æŸ“å­ç»„ä»¶ â†’ æŠ›å‡º Promise â†’ Suspense æ•è· â†’ æ˜¾ç¤º fallback
                                   â†“
                         Promise resolve
                                   â†“
                         é‡æ–°æ¸²æŸ“å­ç»„ä»¶ â†’ æ¸²æŸ“æˆåŠŸ
```

#### 2.3 åµŒå¥— Suspense

å¯ä»¥åµŒå¥—å¤šä¸ª Suspense å®ç°**ç»†ç²’åº¦çš„åŠ è½½çŠ¶æ€**ï¼š

```jsx
function App() {
  return (
    <Suspense fallback={<AppSkeleton />}>
      <Header />
      <Suspense fallback={<ContentSkeleton />}>
        <MainContent />
        <Suspense fallback={<SidebarSkeleton />}>
          <Sidebar />
        </Suspense>
      </Suspense>
    </Suspense>
  );
}
```

**æ¸²æŸ“ç­–ç•¥**ï¼š
- æ¯ä¸ª Suspense ç‹¬ç«‹ç®¡ç†å…¶å­æ ‘çš„åŠ è½½çŠ¶æ€
- å­ç»„ä»¶åŠ è½½å®Œæˆåï¼Œçˆ¶çº§ Suspense ä¸å—å½±å“
- ä¼˜å…ˆæ˜¾ç¤ºæœ€è¿‘çš„çˆ¶çº§ Suspense çš„ fallback

#### 2.4 ä¸ Error Boundary ç»“åˆ

```jsx
import { ErrorBoundary } from 'react-error-boundary';

function App() {
  return (
    <ErrorBoundary fallback={<ErrorPage />}>
      <Suspense fallback={<LoadingPage />}>
        <LazyComponent />
      </Suspense>
    </ErrorBoundary>
  );
}
```

**å¤„ç†æµç¨‹**ï¼š
- åŠ è½½ä¸­ â†’ Suspense æ˜¾ç¤º fallback
- åŠ è½½å¤±è´¥ â†’ Error Boundary æ•è·é”™è¯¯
- åŠ è½½æˆåŠŸ â†’ æ­£å¸¸æ¸²æŸ“ç»„ä»¶

---

### ä¸‰ã€é«˜çº§ç”¨æ³•

#### 3.1 é¢„åŠ è½½ï¼ˆPreloadingï¼‰

æå‰åŠ è½½ç»„ä»¶ï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼š

```jsx
const HeavyComponent = React.lazy(() => import('./HeavyComponent'));

// é¢„åŠ è½½å‡½æ•°
const preloadHeavyComponent = () => {
  import('./HeavyComponent'); // è¿”å› Promise
};

function App() {
  return (
    <div>
      {/* é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½ */}
      <button
        onMouseEnter={preloadHeavyComponent}
        onClick={() => setShow(true)}
      >
        æ‰“å¼€é‡å‹ç»„ä»¶
      </button>

      {show && (
        <Suspense fallback={<Spinner />}>
          <HeavyComponent />
        </Suspense>
      )}
    </div>
  );
}
```

#### 3.2 è‡ªå®šä¹‰æ‡’åŠ è½½åŒ…è£…å™¨

```jsx
// å¸¦é‡è¯•æœºåˆ¶çš„æ‡’åŠ è½½
function lazyWithRetry(componentImport, retries = 3) {
  return React.lazy(async () => {
    for (let i = 0; i < retries; i++) {
      try {
        return await componentImport();
      } catch (error) {
        if (i === retries - 1) throw error;
        await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
      }
    }
  });
}

const MyComponent = lazyWithRetry(() => import('./MyComponent'));
```

#### 3.3 å‘½å chunkï¼ˆWebpackï¼‰

```jsx
// é€šè¿‡ magic comment æŒ‡å®š chunk åç§°
const Dashboard = React.lazy(() =>
  import(/* webpackChunkName: "dashboard" */ './Dashboard')
);

// æ‰“åŒ…ç»“æœ
// dashboard.chunk.js (è€Œä¸æ˜¯ 1.chunk.js)
```

#### 3.4 Suspense ä¸æ•°æ®è·å–ï¼ˆReact 18+ï¼‰

React 18 æ”¯æŒåœ¨æ•°æ®è·å–æ—¶ä½¿ç”¨ Suspenseï¼ˆéœ€è¦æ¡†æ¶æ”¯æŒï¼‰ï¼š

```jsx
// ä½¿ç”¨æ”¯æŒ Suspense çš„æ•°æ®åº“ï¼ˆå¦‚ Relayã€Next.jsï¼‰
import { fetchUser } from './api';

function UserProfile({ userId }) {
  const user = use(fetchUser(userId)); // use Hookï¼ˆReact 19ï¼‰

  return <div>{user.name}</div>;
}

function App() {
  return (
    <Suspense fallback={<Skeleton />}>
      <UserProfile userId={123} />
    </Suspense>
  );
}
```

**è‡ªå®šä¹‰ Suspense æ•°æ®æº**ï¼š
```js
// åˆ›å»ºæ”¯æŒ Suspense çš„èµ„æº
function wrapPromise(promise) {
  let status = 'pending';
  let result;

  const suspender = promise.then(
    data => {
      status = 'success';
      result = data;
    },
    error => {
      status = 'error';
      result = error;
    }
  );

  return {
    read() {
      if (status === 'pending') throw suspender; // è§¦å‘ Suspense
      if (status === 'error') throw result; // è§¦å‘ Error Boundary
      return result;
    }
  };
}

// ä½¿ç”¨
const resource = wrapPromise(fetch('/api/user').then(r => r.json()));

function User() {
  const user = resource.read(); // é¦–æ¬¡è°ƒç”¨ä¼šæŠ›å‡º Promise
  return <div>{user.name}</div>;
}
```

---

### å››ã€åº•å±‚åŸç†æ·±å…¥

#### 4.1 Fiber ä¸ Suspense

Suspense ä¾èµ– React Fiber æ¶æ„çš„å¯ä¸­æ–­æ¸²æŸ“ç‰¹æ€§ï¼š

```js
// Fiber æ¸²æŸ“æµç¨‹
function performUnitOfWork(fiber) {
  try {
    // æ‰§è¡Œç»„ä»¶æ¸²æŸ“
    const children = fiber.type(fiber.props);
    reconcileChildren(fiber, children);
  } catch (error) {
    if (error instanceof Promise) {
      // æ•è· Promiseï¼Œæ ‡è®° Fiber ä¸ºæŒ‚èµ·çŠ¶æ€
      fiber.tag = SuspenseComponent;
      fiber.pendingProps = error;

      // å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„ Suspense è¾¹ç•Œ
      let suspenseBoundary = fiber.return;
      while (suspenseBoundary && suspenseBoundary.tag !== SuspenseComponent) {
        suspenseBoundary = suspenseBoundary.return;
      }

      // æ¸²æŸ“ fallback
      if (suspenseBoundary) {
        suspenseBoundary.effectTag |= ShouldCapture;
      }

      // æ³¨å†Œ Promise å›è°ƒ
      error.then(() => {
        // Promise resolve åï¼Œé‡æ–°è°ƒåº¦æ¸²æŸ“
        scheduleUpdateOnFiber(fiber);
      });
    } else {
      throw error; // å…¶ä»–é”™è¯¯ç»§ç»­æŠ›å‡º
    }
  }
}
```

#### 4.2 åŠ¨æ€ import åŸç†

```js
// Webpack ç¼–è¯‘å‰
const Component = React.lazy(() => import('./Component'));

// Webpack ç¼–è¯‘å
const Component = React.lazy(() => {
  return __webpack_require__.e(/* chunk id */ 123)
    .then(__webpack_require__.bind(null, /* module id */ './Component.js'));
});

// __webpack_require__.e å®ç°
__webpack_require__.e = function(chunkId) {
  return new Promise((resolve, reject) => {
    const script = document.createElement('script');
    script.src = `/${chunkId}.chunk.js`;
    script.onload = resolve;
    script.onerror = reject;
    document.head.appendChild(script);
  });
};
```

---

### äº”ã€æœ€ä½³å®è·µ

#### 5.1 è·¯ç”±æ‡’åŠ è½½æ¨¡å¼

```jsx
// routes.js
export const routes = [
  {
    path: '/',
    component: React.lazy(() => import('./pages/Home'))
  },
  {
    path: '/dashboard',
    component: React.lazy(() => import('./pages/Dashboard'))
  }
];

// App.js
import { routes } from './routes';

function App() {
  return (
    <Suspense fallback={<PageLoader />}>
      <Routes>
        {routes.map(route => (
          <Route key={route.path} {...route} />
        ))}
      </Routes>
    </Suspense>
  );
}
```

#### 5.2 ä¼˜é›…çš„åŠ è½½çŠ¶æ€

```jsx
// å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œé¿å…é—ªçƒ
function DelayedFallback({ delay = 300, children }) {
  const [show, setShow] = useState(false);

  useEffect(() => {
    const timer = setTimeout(() => setShow(true), delay);
    return () => clearTimeout(timer);
  }, [delay]);

  return show ? children : null;
}

<Suspense fallback={
  <DelayedFallback>
    <Spinner />
  </DelayedFallback>
}>
  <LazyComponent />
</Suspense>
```

#### 5.3 åŠ è½½å¤±è´¥é‡è¯•

```jsx
function LazyComponentWithRetry() {
  const [retryCount, setRetryCount] = useState(0);

  const Component = useMemo(
    () => React.lazy(() =>
      import('./Component').catch(() => {
        // åŠ è½½å¤±è´¥ï¼Œç­‰å¾…é‡è¯•
        return new Promise(() => {});
      })
    ),
    [retryCount]
  );

  return (
    <ErrorBoundary
      fallbackRender={({ error, resetErrorBoundary }) => (
        <div>
          <p>åŠ è½½å¤±è´¥ï¼š{error.message}</p>
          <button onClick={() => {
            setRetryCount(c => c + 1);
            resetErrorBoundary();
          }}>
            é‡è¯•
          </button>
        </div>
      )}
    >
      <Suspense fallback={<Spinner />}>
        <Component />
      </Suspense>
    </ErrorBoundary>
  );
}
```

#### 5.4 æ€§èƒ½ç›‘æ§

```jsx
import { Suspense, Profiler } from 'react';

function onRenderCallback(
  id,
  phase,
  actualDuration,
  baseDuration,
  startTime,
  commitTime
) {
  // ä¸ŠæŠ¥åŠ è½½æ—¶é—´
  analytics.track('component_load', {
    componentId: id,
    loadTime: actualDuration
  });
}

<Profiler id="LazyComponent" onRender={onRenderCallback}>
  <Suspense fallback={<Spinner />}>
    <LazyComponent />
  </Suspense>
</Profiler>
```

---

### å…­ã€å¸¸è§é—®é¢˜

#### Q1ï¼šä¸ºä»€ä¹ˆ Suspense ä¸æ”¯æŒ SSRï¼Ÿ

**ç­”**ï¼šReact 18 ä¹‹å‰ï¼ŒSuspense åœ¨æœåŠ¡ç«¯ä¼šç›´æ¥æ¸²æŸ“ fallbackï¼Œå› ä¸ºæœåŠ¡ç«¯æ— æ³•ç­‰å¾…å¼‚æ­¥åŠ è½½ã€‚React 18+ å¼•å…¥äº† `renderToPipeableStream` æ”¯æŒæµå¼ SSR å’Œ Suspenseã€‚

```jsx
// React 18+ æœåŠ¡ç«¯
import { renderToPipeableStream } from 'react-dom/server';

const { pipe } = renderToPipeableStream(
  <Suspense fallback={<Spinner />}>
    <AsyncComponent />
  </Suspense>,
  {
    onShellReady() {
      // å‘é€ HTML shell
      pipe(response);
    }
  }
);
```

#### Q2ï¼šå¦‚ä½•é¿å…åŠ è½½çŠ¶æ€é—ªçƒï¼Ÿ

**ç­”**ï¼šä½¿ç”¨å»¶è¿Ÿæ˜¾ç¤ºæˆ–éª¨æ¶å±ï¼š
```jsx
<Suspense fallback={
  <DelayedFallback delay={300}>
    <Skeleton />
  </DelayedFallback>
}>
  <LazyComponent />
</Suspense>
```

#### Q3ï¼šlazy ç»„ä»¶å¦‚ä½•æ¥æ”¶ propsï¼Ÿ

**ç­”**ï¼šåƒæ™®é€šç»„ä»¶ä¸€æ ·ä¼ é€’ï¼š
```jsx
const LazyComponent = React.lazy(() => import('./Component'));

<Suspense fallback={<Spinner />}>
  <LazyComponent name="å¼ ä¸‰" age={25} />
</Suspense>
```

---

### ä¸ƒã€æ€»ç»“

1. **æ ¸å¿ƒåŸç†**ï¼š
   - React.lazy é€šè¿‡åŠ¨æ€ `import()` å®ç°ä»£ç åˆ†å‰²
   - Suspense é€šè¿‡æ•è· Promise å®ç°å£°æ˜å¼åŠ è½½çŠ¶æ€
   - ä¸¤è€…é…åˆå®ç°ç»„ä»¶çº§åˆ«çš„æŒ‰éœ€åŠ è½½

2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - å‡å°‘åˆå§‹ bundle ä½“ç§¯ï¼ŒåŠ å¿«é¦–å±åŠ è½½
   - é…åˆè·¯ç”±å®ç°é¡µé¢çº§ä»£ç åˆ†å‰²
   - ä½¿ç”¨é¢„åŠ è½½ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

3. **æ³¨æ„äº‹é¡¹**ï¼š
   - å¿…é¡»é…åˆ Suspense ä½¿ç”¨
   - åªæ”¯æŒ default export
   - éœ€è¦é…åˆ Error Boundary å¤„ç†åŠ è½½å¤±è´¥

**é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- èƒ½è§£é‡Š throw Promise çš„å·¥ä½œæœºåˆ¶
- äº†è§£ Webpack çš„ code splitting åŸç†
- çŸ¥é“å¦‚ä½•ä½¿ç”¨ React DevTools æŸ¥çœ‹ chunk åŠ è½½æƒ…å†µ
- èƒ½å®ç°è‡ªå®šä¹‰çš„ Suspense æ•°æ®æºï¼ˆwrapPromise æ¨¡å¼ï¼‰
