---
title: Next.js çš„ App Router å’Œ Pages Router åŒºåˆ«
tags:
  - å‰ç«¯React
status: robot
class: å‰ç«¯React
slug: nextjs-app-router-vs-pages-router
ref:
---

## æ ¸å¿ƒè¦ç‚¹

**App Router vs Pages Router çš„æœ¬è´¨**ï¼šApp Routerï¼ˆNext.js 13+ï¼‰åŸºäº React Server Components æ„å»ºï¼Œæ”¯æŒåµŒå¥—å¸ƒå±€ã€æµå¼æ¸²æŸ“ã€ç»†ç²’åº¦æ•°æ®è·å–ï¼›Pages Router æ˜¯ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼Œä½¿ç”¨ getServerSideProps/getStaticProps è¿›è¡Œæ•°æ®è·å–ã€‚App Router ä»£è¡¨äº† Next.js çš„æœªæ¥ï¼Œä½† Pages Router ä¾ç„¶ç¨³å®šä¸”å‘åå…¼å®¹ã€‚

---

## è¯¦ç»†å›ç­”

### ä¸€ã€Pages Routerï¼ˆä¼ ç»Ÿæ–¹æ¡ˆï¼‰

#### 1. æ ¸å¿ƒç‰¹æ€§

Pages Router æ˜¯ Next.js ä» v1 å¼€å§‹å°±å­˜åœ¨çš„è·¯ç”±ç³»ç»Ÿï¼ŒåŸºäº `pages/` ç›®å½•çš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ã€‚

**ç›®å½•ç»“æ„**ï¼š

```
pages/
â”œâ”€â”€ index.tsx              â†’ /
â”œâ”€â”€ about.tsx              â†’ /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ index.tsx          â†’ /blog
â”‚   â””â”€â”€ [slug].tsx         â†’ /blog/:slug
â”œâ”€â”€ api/
â”‚   â””â”€â”€ users.ts           â†’ /api/users
â””â”€â”€ _app.tsx               â†’ å…¨å±€å¸ƒå±€
```

#### 2. æ•°æ®è·å–æ–¹å¼

```tsx
// pages/posts/[id].tsx
import { GetServerSideProps, GetStaticProps, GetStaticPaths } from 'next';

// â‘  æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆæ¯æ¬¡è¯·æ±‚ï¼‰
export const getServerSideProps: GetServerSideProps = async (context) => {
  const post = await fetchPost(context.params.id);
  return { props: { post } };
};

// â‘¡ é™æ€ç”Ÿæˆï¼ˆæ„å»ºæ—¶ï¼‰
export const getStaticProps: GetStaticProps = async (context) => {
  const post = await fetchPost(context.params.id);
  return {
    props: { post },
    revalidate: 60, // ISR
  };
};

// â‘¢ åŠ¨æ€è·¯ç”±çš„é™æ€è·¯å¾„
export const getStaticPaths: GetStaticPaths = async () => {
  const posts = await fetchAllPosts();
  return {
    paths: posts.map(p => ({ params: { id: p.id } })),
    fallback: 'blocking',
  };
};

export default function PostPage({ post }) {
  return <div>{post.title}</div>;
}
```

#### 3. å¸ƒå±€ç³»ç»Ÿ

**å…¨å±€å¸ƒå±€**ï¼ˆ`_app.tsx`ï¼‰ï¼š

```tsx
// pages/_app.tsx
export default function MyApp({ Component, pageProps }) {
  return (
    <Layout>
      <Component {...pageProps} />
    </Layout>
  );
}
```

**åµŒå¥—å¸ƒå±€**ï¼ˆéœ€æ‰‹åŠ¨å®ç°ï¼‰ï¼š

```tsx
// pages/dashboard/settings.tsx
import DashboardLayout from '@/layouts/DashboardLayout';

export default function Settings() {
  return <div>Settings Content</div>;
}

Settings.getLayout = function getLayout(page) {
  return <DashboardLayout>{page}</DashboardLayout>;
};
```

#### 4. è·¯ç”±å¯¼èˆª

```tsx
import { useRouter } from 'next/router';
import Link from 'next/link';

export default function Page() {
  const router = useRouter();
  const { id } = router.query; // è·å–è·¯ç”±å‚æ•°

  const handleClick = () => {
    router.push('/dashboard'); // ç¼–ç¨‹å¼å¯¼èˆª
  };

  return <Link href="/about">About</Link>; // å£°æ˜å¼å¯¼èˆª
}
```

---

### äºŒã€App Routerï¼ˆæ–°æ¶æ„ - Next.js 13+ï¼‰

#### 1. æ ¸å¿ƒç‰¹æ€§

App Router å¼•å…¥äº†å…¨æ–°çš„è·¯ç”±ç³»ç»Ÿï¼ŒåŸºäº `app/` ç›®å½•ï¼Œæ·±åº¦é›†æˆ React Server Componentsã€‚

**ç›®å½•ç»“æ„**ï¼š

```
app/
â”œâ”€â”€ layout.tsx             â†’ æ ¹å¸ƒå±€ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ page.tsx               â†’ / é¦–é¡µ
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx           â†’ /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ layout.tsx         â†’ /blog çš„å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx           â†’ /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx       â†’ /blog/:slug
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ layout.tsx         â†’ åµŒå¥—å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx           â†’ /dashboard
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx       â†’ /dashboard/settings
â””â”€â”€ api/
    â””â”€â”€ users/
        â””â”€â”€ route.ts       â†’ /api/users
```

#### 2. Server Components ä¸ Client Components

**Server Component**ï¼ˆé»˜è®¤ï¼‰ï¼š

```tsx
// app/posts/[id]/page.tsx
// é»˜è®¤æ˜¯ Server Componentï¼Œåœ¨æœåŠ¡å™¨æ‰§è¡Œ
export default async function PostPage({ params }: { params: { id: string } }) {
  // ç›´æ¥åœ¨ç»„ä»¶å†… async/await è·å–æ•°æ®
  const post = await fetch(`https://api.example.com/posts/${params.id}`).then(res => res.json());

  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  );
}

// ç”Ÿæˆé™æ€å‚æ•°ï¼ˆç±»ä¼¼ getStaticPathsï¼‰
export async function generateStaticParams() {
  const posts = await fetchAllPosts();
  return posts.map(post => ({ id: post.id }));
}

// æ§åˆ¶æ¸²æŸ“ç­–ç•¥
export const dynamic = 'force-dynamic'; // å¼ºåˆ¶åŠ¨æ€æ¸²æŸ“ï¼ˆSSRï¼‰
export const revalidate = 3600; // ISRï¼ˆ1å°æ—¶ï¼‰
```

**Client Component**ï¼ˆéœ€æ˜¾å¼å£°æ˜ï¼‰ï¼š

```tsx
// app/components/Counter.tsx
'use client'; // å¿…é¡»åœ¨æ–‡ä»¶é¡¶éƒ¨å£°æ˜

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  );
}
```

**ç»„åˆä½¿ç”¨**ï¼š

```tsx
// app/dashboard/page.tsx (Server Component)
import ClientComponent from './ClientComponent';

export default async function Dashboard() {
  const data = await fetchData(); // æœåŠ¡å™¨è·å–æ•°æ®

  return (
    <div>
      <h1>Dashboard</h1>
      <ServerSideData data={data} />
      <ClientComponent /> {/* å®¢æˆ·ç«¯äº¤äº’ç»„ä»¶ */}
    </div>
  );
}
```

#### 3. åµŒå¥—å¸ƒå±€ç³»ç»Ÿ

App Router çš„å¸ƒå±€è‡ªåŠ¨åµŒå¥—ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼š

```tsx
// app/layout.tsxï¼ˆæ ¹å¸ƒå±€ï¼‰
export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <Header />
        {children}
        <Footer />
      </body>
    </html>
  );
}

// app/dashboard/layout.tsxï¼ˆåµŒå¥—å¸ƒå±€ï¼‰
export default function DashboardLayout({ children }) {
  return (
    <div className="dashboard">
      <Sidebar />
      <main>{children}</main>
    </div>
  );
}

// app/dashboard/settings/page.tsx
export default function Settings() {
  return <div>Settings</div>;
}

// æ¸²æŸ“ç»“æœï¼š
// <RootLayout>
//   <DashboardLayout>
//     <Settings />
//   </DashboardLayout>
// </RootLayout>
```

**å¸ƒå±€ç‰¹æ€§**ï¼š

- å¸ƒå±€åœ¨è·¯ç”±åˆ‡æ¢æ—¶**ä¿æŒçŠ¶æ€**ï¼ˆä¸é‡æ–°æŒ‚è½½ï¼‰
- å¸ƒå±€å¯ä»¥è®¿é—®è·¯ç”±å‚æ•°å’Œ searchParams
- æ”¯æŒ `loading.tsx` å’Œ `error.tsx` ç‰¹æ®Šæ–‡ä»¶

#### 4. æ•°æ®è·å–çš„é©å‘½æ€§å˜åŒ–

**Pages Router çš„é—®é¢˜**ï¼š

```tsx
// pages/post/[id].tsx
export async function getServerSideProps({ params }) {
  const post = await fetchPost(params.id);
  const comments = await fetchComments(params.id);
  const author = await fetchAuthor(post.authorId);

  // æ‰€æœ‰æ•°æ®åœ¨ä¸€ä¸ªåœ°æ–¹è·å–ï¼Œç»„ä»¶æ— æ³•æ§åˆ¶
  return { props: { post, comments, author } };
}
```

**App Router çš„è§£å†³æ–¹æ¡ˆ**ï¼š

```tsx
// app/post/[id]/page.tsx
async function Post({ id }: { id: string }) {
  const post = await fetchPost(id); // ç»„ä»¶å†…è·å–
  return <div>{post.title}</div>;
}

async function Comments({ postId }: { postId: string }) {
  const comments = await fetchComments(postId); // å¦ä¸€ä¸ªç»„ä»¶ç‹¬ç«‹è·å–
  return <ul>{comments.map(c => <li key={c.id}>{c.text}</li>)}</ul>;
}

export default async function PostPage({ params }) {
  return (
    <div>
      <Post id={params.id} />
      <Suspense fallback={<CommentsLoading />}>
        <Comments postId={params.id} />
      </Suspense>
    </div>
  );
}
```

**è‡ªåŠ¨è¯·æ±‚å»é‡**ï¼š

```tsx
// app/post/[id]/page.tsx
async function fetchPost(id: string) {
  // Next.js è‡ªåŠ¨ç¼“å­˜å’Œå»é‡ç›¸åŒçš„ fetch è¯·æ±‚
  const res = await fetch(`https://api.example.com/posts/${id}`);
  return res.json();
}

export default async function Page({ params }) {
  const post1 = await fetchPost(params.id); // å‘èµ·è¯·æ±‚
  const post2 = await fetchPost(params.id); // ä½¿ç”¨ç¼“å­˜ï¼Œä¸é‡å¤è¯·æ±‚
  // post1 === post2
}
```

#### 5. æµå¼æ¸²æŸ“ä¸ Suspense

```tsx
// app/dashboard/page.tsx
import { Suspense } from 'react';

async function SlowComponent() {
  await new Promise(resolve => setTimeout(resolve, 3000));
  return <div>Slow data loaded</div>;
}

export default function Dashboard() {
  return (
    <div>
      <h1>Dashboard</h1>
      <FastContent />

      <Suspense fallback={<div>Loading slow data...</div>}>
        <SlowComponent />
      </Suspense>
    </div>
  );
}

// æ¸²æŸ“æµç¨‹ï¼š
// 1. ç«‹å³å‘é€ <h1>Dashboard</h1> + <FastContent />
// 2. æ˜¾ç¤º "Loading slow data..."
// 3. 3ç§’åæµå¼å‘é€ <SlowComponent /> çš„ HTML
```

#### 6. è·¯ç”±å¯¼èˆª

```tsx
// app/components/Navigation.tsx
'use client';

import { useRouter, usePathname, useSearchParams } from 'next/navigation';
import Link from 'next/link';

export default function Navigation() {
  const router = useRouter();
  const pathname = usePathname(); // å½“å‰è·¯å¾„
  const searchParams = useSearchParams(); // URL å‚æ•°

  return (
    <>
      <Link href="/dashboard">Dashboard</Link>
      <button onClick={() => router.push('/settings')}>
        Go to Settings
      </button>
      <p>Current path: {pathname}</p>
    </>
  );
}
```

---

### ä¸‰ã€æ ¸å¿ƒå·®å¼‚å¯¹æ¯”

| ç‰¹æ€§ | Pages Router | App Router |
|------|-------------|-----------|
| **ç›®å½•** | `pages/` | `app/` |
| **React ç‰ˆæœ¬** | æ”¯æŒæ‰€æœ‰ç‰ˆæœ¬ | éœ€è¦ React 18+ |
| **ç»„ä»¶ç±»å‹** | å®¢æˆ·ç«¯ç»„ä»¶ | Server Componentsï¼ˆé»˜è®¤ï¼‰ + Client Components |
| **æ•°æ®è·å–** | `getServerSideProps`ã€`getStaticProps` | ç»„ä»¶å†… `async/await` |
| **å¸ƒå±€ç³»ç»Ÿ** | æ‰‹åŠ¨å®ç°ï¼ˆé€šè¿‡ `_app.tsx`ï¼‰ | åŸç”ŸåµŒå¥—å¸ƒå±€ï¼ˆ`layout.tsx`ï¼‰ |
| **åŠ è½½çŠ¶æ€** | æ‰‹åŠ¨å®ç° | `loading.tsx` æ–‡ä»¶çº¦å®š |
| **é”™è¯¯å¤„ç†** | `_error.tsx` | `error.tsx`ï¼ˆæ”¯æŒé”™è¯¯è¾¹ç•Œï¼‰ |
| **æµå¼æ¸²æŸ“** | ä¸æ”¯æŒ | åŸç”Ÿæ”¯æŒï¼ˆSuspense + Streamingï¼‰ |
| **å¹¶è¡Œè·¯ç”±** | ä¸æ”¯æŒ | æ”¯æŒï¼ˆParallel Routesï¼‰ |
| **æ‹¦æˆªè·¯ç”±** | ä¸æ”¯æŒ | æ”¯æŒï¼ˆIntercepting Routesï¼‰ |
| **æ•°æ®ç¼“å­˜** | æ‰‹åŠ¨æ§åˆ¶ | è‡ªåŠ¨ç¼“å­˜å’Œå»é‡ |
| **è·¯ç”±ç»„** | ä¸æ”¯æŒ | æ”¯æŒï¼ˆ`(group)` è¯­æ³•ï¼‰ |

### å››ã€é«˜çº§ç‰¹æ€§å¯¹æ¯”

#### 1. Parallel Routesï¼ˆå¹¶è¡Œè·¯ç”±ï¼‰

App Router ç‹¬æœ‰åŠŸèƒ½ï¼Œå…è®¸åŒæ—¶æ¸²æŸ“å¤šä¸ªé¡µé¢ï¼š

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ @team/
â”‚   â””â”€â”€ page.tsx           â†’ å›¢é˜Ÿæ§½ä½
â”œâ”€â”€ @analytics/
â”‚   â””â”€â”€ page.tsx           â†’ åˆ†ææ§½ä½
â””â”€â”€ page.tsx               â†’ ä¸»å†…å®¹
```

```tsx
// app/layout.tsx
export default function Layout({
  children,
  team,
  analytics,
}: {
  children: React.ReactNode;
  team: React.ReactNode;
  analytics: React.ReactNode;
}) {
  return (
    <div>
      <div>{children}</div>
      <div className="sidebar">
        {team}
        {analytics}
      </div>
    </div>
  );
}
```

#### 2. Intercepting Routesï¼ˆæ‹¦æˆªè·¯ç”±ï¼‰

åˆ›å»ºæ¨¡æ€æ¡†ç­‰åœºæ™¯ï¼š

```
app/
â”œâ”€â”€ feed/
â”‚   â””â”€â”€ page.tsx           â†’ /feed
â”œâ”€â”€ photo/
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx       â†’ /photo/123
â””â”€â”€ @modal/
    â””â”€â”€ (..)photo/
        â””â”€â”€ [id]/
            â””â”€â”€ page.tsx   â†’ æ‹¦æˆª /photo/123ï¼Œæ˜¾ç¤ºæ¨¡æ€æ¡†
```

#### 3. Route Groupsï¼ˆè·¯ç”±ç»„ï¼‰

ç»„ç»‡è·¯ç”±è€Œä¸å½±å“ URL ç»“æ„ï¼š

```
app/
â”œâ”€â”€ (marketing)/
â”‚   â”œâ”€â”€ layout.tsx         â†’ è¥é”€é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â””â”€â”€ page.tsx       â†’ /about (æ—  marketing å‰ç¼€)
â”‚   â””â”€â”€ contact/
â”‚       â””â”€â”€ page.tsx       â†’ /contact
â””â”€â”€ (shop)/
    â”œâ”€â”€ layout.tsx         â†’ å•†åº—å¸ƒå±€
    â””â”€â”€ products/
        â””â”€â”€ page.tsx       â†’ /products
```

### äº”ã€æ€§èƒ½å¯¹æ¯”

#### 1. åŒ…ä½“ç§¯

**Pages Router**ï¼š
- æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯å®¢æˆ·ç«¯ç»„ä»¶
- æ•´ä¸ªé¡µé¢çš„ JavaScript éƒ½ä¼šå‘é€åˆ°å®¢æˆ·ç«¯

```tsx
// pages/index.tsx
import HeavyLibrary from 'heavy-library'; // æ•´ä¸ªåº“å‘é€åˆ°å®¢æˆ·ç«¯

export default function Home({ data }) {
  return <HeavyLibrary data={data} />;
}
```

**App Router**ï¼š
- Server Components çš„ä»£ç **ä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯**
- åªæœ‰ Client Components çš„ä»£ç æ‰ä¼šæ‰“åŒ…

```tsx
// app/page.tsx (Server Component)
import HeavyLibrary from 'heavy-library'; // ä»…åœ¨æœåŠ¡å™¨è¿è¡Œ

export default async function Home() {
  const data = await fetchData();
  const processed = HeavyLibrary.process(data); // æœåŠ¡å™¨å¤„ç†
  return <DisplayData data={processed} />; // åªå‘é€ç»“æœ
}
```

**å®é™…æ•ˆæœ**ï¼š

```
Pages Router:  Bundle size: 200KB (åŒ…å« heavy-library)
App Router:    Bundle size: 50KB  (heavy-library ä»…æœåŠ¡å™¨è¿è¡Œ)
```

#### 2. æ•°æ®è·å–æ€§èƒ½

**Pages Routerï¼ˆç€‘å¸ƒæµï¼‰**ï¼š

```tsx
// pages/post/[id].tsx
export async function getServerSideProps({ params }) {
  const post = await fetchPost(params.id);        // 1ç§’
  const author = await fetchAuthor(post.authorId); // 1ç§’
  const related = await fetchRelated(post.tags);   // 1ç§’
  // æ€»æ—¶é—´ï¼š3ç§’ï¼ˆä¸²è¡Œï¼‰
  return { props: { post, author, related } };
}
```

**App Routerï¼ˆå¹¶è¡Œ + æµå¼ï¼‰**ï¼š

```tsx
// app/post/[id]/page.tsx
export default async function PostPage({ params }) {
  // ä¸‰ä¸ªè¯·æ±‚å¹¶è¡Œå‘èµ·
  const postPromise = fetchPost(params.id);
  const authorPromise = fetchAuthor(postPromise.then(p => p.authorId));
  const relatedPromise = fetchRelated(postPromise.then(p => p.tags));

  return (
    <>
      <Suspense fallback={<PostSkeleton />}>
        <Post promise={postPromise} /> {/* 1ç§’åæ˜¾ç¤º */}
      </Suspense>

      <Suspense fallback={<AuthorSkeleton />}>
        <Author promise={authorPromise} /> {/* 1ç§’åæ˜¾ç¤º */}
      </Suspense>

      <Suspense fallback={<RelatedSkeleton />}>
        <Related promise={relatedPromise} /> {/* 1ç§’åæ˜¾ç¤º */}
      </Suspense>
    </>
  );
}
// æ€»æ—¶é—´ï¼š1ç§’ï¼ˆå¹¶è¡Œ + æ¸è¿›å¼æ¸²æŸ“ï¼‰
```

### å…­ã€è¿ç§»å»ºè®®

#### 1. æ¸è¿›å¼è¿ç§»

Next.js 13+ æ”¯æŒåŒæ—¶ä½¿ç”¨ä¸¤ç§è·¯ç”±ï¼š

```
project/
â”œâ”€â”€ app/              â†’ æ–°é¡µé¢ç”¨ App Router
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ page.tsx
â””â”€â”€ pages/            â†’ æ—§é¡µé¢ä¿ç•™ Pages Router
    â”œâ”€â”€ index.tsx
    â””â”€â”€ about.tsx
```

**ä¼˜å…ˆçº§**ï¼šApp Router > Pages Routerï¼ˆURL å†²çªæ—¶ï¼‰

#### 2. è¿ç§»è·¯å¾„

**Step 1ï¼šåˆ›å»ºæ ¹å¸ƒå±€**

```tsx
// app/layout.tsx
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

**Step 2ï¼šé€é¡µè¿ç§»**

```tsx
// æ—§ä»£ç ï¼ˆpages/posts/[id].tsxï¼‰
export async function getServerSideProps({ params }) {
  const post = await fetchPost(params.id);
  return { props: { post } };
}

export default function Post({ post }) {
  return <div>{post.title}</div>;
}

// æ–°ä»£ç ï¼ˆapp/posts/[id]/page.tsxï¼‰
export default async function Post({ params }: { params: { id: string } }) {
  const post = await fetchPost(params.id);
  return <div>{post.title}</div>;
}
```

**Step 3ï¼šè¿ç§»æ•°æ®è·å–**

| Pages Router | App Router |
|--------------|-----------|
| `getServerSideProps` | `export const dynamic = 'force-dynamic'` + async ç»„ä»¶ |
| `getStaticProps` | async ç»„ä»¶ï¼ˆé»˜è®¤é™æ€ï¼‰ |
| `getStaticPaths` | `generateStaticParams` |
| `getInitialProps` | ä¸æ¨èä½¿ç”¨ï¼ˆè¿ç§»åˆ° Server Componentï¼‰ |

### ä¸ƒã€æœ€ä½³å®è·µ

#### 1. App Router ä½¿ç”¨å»ºè®®

**âœ… åº”è¯¥ä½¿ç”¨ Server Component çš„åœºæ™¯**ï¼š
- æ•°æ®è·å–ï¼ˆAPI è°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰
- è®¿é—®åç«¯èµ„æºï¼ˆæ–‡ä»¶ç³»ç»Ÿã€ç¯å¢ƒå˜é‡ï¼‰
- åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ã€ä»¤ç‰Œï¼‰
- ä¾èµ–å¤§å‹åº“ï¼ˆä»…æœåŠ¡å™¨éœ€è¦ï¼‰

**âœ… åº”è¯¥ä½¿ç”¨ Client Component çš„åœºæ™¯**ï¼š
- äº‹ä»¶ç›‘å¬å™¨ï¼ˆ`onClick`ã€`onChange` ç­‰ï¼‰
- React Hooksï¼ˆ`useState`ã€`useEffect` ç­‰ï¼‰
- æµè§ˆå™¨ APIï¼ˆlocalStorageã€window ç­‰ï¼‰
- äº¤äº’å’ŒåŠ¨ç”»

#### 2. ç»„ä»¶ç»„åˆæ¨¡å¼

```tsx
// app/posts/[id]/page.tsx (Server Component)
import ClientInteraction from './ClientInteraction';

export default async function PostPage({ params }) {
  const post = await fetchPost(params.id); // æœåŠ¡å™¨è·å–æ•°æ®

  return (
    <article>
      <h1>{post.title}</h1>
      <div>{post.content}</div>

      {/* é€šè¿‡ props ä¼ é€’æ•°æ®ç»™ Client Component */}
      <ClientInteraction postId={post.id} initialLikes={post.likes} />
    </article>
  );
}

// app/posts/[id]/ClientInteraction.tsx (Client Component)
'use client';

import { useState } from 'react';

export default function ClientInteraction({ postId, initialLikes }) {
  const [likes, setLikes] = useState(initialLikes);

  const handleLike = async () => {
    await fetch(`/api/posts/${postId}/like`, { method: 'POST' });
    setLikes(likes + 1);
  };

  return <button onClick={handleLike}>ğŸ‘ {likes}</button>;
}
```

### å…«ã€é€‰æ‹©å»ºè®®

**é€‰æ‹© Pages Router çš„æƒ…å†µ**ï¼š
- ç°æœ‰é¡¹ç›®ç¨³å®šè¿è¡Œï¼Œæ— è¿«åˆ‡éœ€æ±‚
- å›¢é˜Ÿä¸ç†Ÿæ‚‰ Server Components
- ä¾èµ–ä¸å…¼å®¹ Server Components çš„åº“
- éœ€è¦ `getInitialProps`ï¼ˆè™½ä¸æ¨èï¼‰

**é€‰æ‹© App Router çš„æƒ…å†µ**ï¼š
- æ–°é¡¹ç›®å¯åŠ¨
- éœ€è¦æè‡´æ€§èƒ½ï¼ˆå‡å°‘å®¢æˆ·ç«¯ JSï¼‰
- éœ€è¦æµå¼æ¸²æŸ“å’Œ Suspense
- å¤æ‚çš„åµŒå¥—å¸ƒå±€éœ€æ±‚
- æƒ³ä½¿ç”¨æœ€æ–°çš„ React ç‰¹æ€§

---

## æ€»ç»“

**App Router æ˜¯ Next.js çš„æœªæ¥æ–¹å‘**ï¼Œå®ƒé€šè¿‡ React Server Componentsã€æµå¼æ¸²æŸ“ã€åµŒå¥—å¸ƒå±€ç­‰ç‰¹æ€§ï¼Œå¸¦æ¥äº†ï¼š

1. **æ›´å¥½çš„æ€§èƒ½**ï¼šå‡å°‘å®¢æˆ·ç«¯ JavaScriptï¼Œæ›´å¿«çš„é¦–å±åŠ è½½
2. **æ›´å¥½çš„å¼€å‘ä½“éªŒ**ï¼šç»„ä»¶å†…æ•°æ®è·å–ï¼Œè‡ªåŠ¨å¸ƒå±€åµŒå¥—
3. **æ›´çµæ´»çš„æ¶æ„**ï¼šParallel Routesã€Intercepting Routes ç­‰é«˜çº§åŠŸèƒ½

**Pages Router ä»ç„¶ç¨³å®šå¯é **ï¼Œé€‚åˆï¼š
- ç°æœ‰é¡¹ç›®ç»´æŠ¤
- å›¢é˜Ÿå­¦ä¹ æ›²çº¿è€ƒè™‘
- ç‰¹å®šåœºæ™¯éœ€æ±‚

å¯¹äºæ–°é¡¹ç›®ï¼Œ**å¼ºçƒˆæ¨èä½¿ç”¨ App Router**ï¼Œå®ƒä»£è¡¨äº† React å’Œ Next.js çš„å‘å±•æ–¹å‘ã€‚å¯¹äºç°æœ‰é¡¹ç›®ï¼Œå¯ä»¥é‡‡å–æ¸è¿›å¼è¿ç§»ç­–ç•¥ï¼Œé€æ­¥äº«å—æ–°ç‰¹æ€§å¸¦æ¥çš„å¥½å¤„ã€‚
